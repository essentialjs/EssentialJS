/*
    Essential JavaScript ‚ùÄ http://essentialjs.com
    Copyright (C) 2011 by Henrik Vendelbo

    This program is free software: you can redistribute it and/or modify it under the terms of
    the GNU Affero General Public License version 3 as published by the Free Software Foundation.

    Additionally,

    Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
    and associated documentation files (the "Software"), to deal in the Software without restriction, 
    including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, 
    and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, 
    subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING 
    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, 
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
function Resolver(e,t,n){"use strict";function r(e,r,i){var s=t;for(var o=0,u;o<e.length;++o){u=e[o];var a=s;s=s[u];if(s==undefined){switch(i){case undefined:case"generate":if(s===undefined){s=a[u]=(n.generator||Generator.ObjectGenerator)();continue};case"null":if(s===undefined)return null;break;case"undefined":if(s===undefined)return undefined}if(o<e.length-1)throw new Error("The '"+u+"' part of '"+e.join(".")+"' couldn't be resolved.")}}if(r)for(var f=0,u;u=r[f];++f){var a=s;s=s[u];if(s==undefined){switch(i){case undefined:case"generate":if(s===undefined){s=a[u]=(n.generator||Generator.ObjectGenerator)();continue};case"null":if(s===undefined)return null;break;case"undefined":if(s===undefined)return undefined}if(o<e.length-1)throw new Error("The '"+u+"' part of '"+r.join(".")+"' in '"+e.join(".")+"' couldn't be resolved.")}}return s}function i(e,t,n,r){return n[r]===e?!1:(n[r]=e,typeof e=="object"&&e!==null&&e.__generator__==e&&(e.info.symbol=r,e.info["package"]=t.join("."),e.info.within=n),!0)}function s(){}function o(e,t,n,r,i){function u(t,n,r){if(this.inTrigger)return;++this.inTrigger,this.base=t,this.symbol=n,this.value=r,this.callback.call(e,this),--this.inTrigger}var o={};return o.resolver=e,o.type=t,o.selector=n,o.data=r,o.callback=i,o.inTrigger=0,o.trigger=i?u:s,o}function u(e,t){return typeof e=="object"?e.length!=undefined?r(e,null,t):r(e.name.split("."),null,e.onundefined):r(e.split("."),null,t)}function f(){var e={};for(var t in a)e[t]=[];return e}function l(e,t,n){function d(){if(arguments.length==1){var e=typeof arguments[0]=="object"?arguments[0]:arguments[0].split("."),n=r(s,e,t);return n}var i=r(s,null,t);return i}function v(e){if(arguments.length>1){var t=typeof arguments[0]=="object"?arguments[0]:arguments[0].split("."),n=t.pop(),o=r(s,t,p),a=s.concat(t),f=a.join(".");t.push(n),e=arguments[1];if(i(e,a,o,n)){var d=u.references[f+"."+n];d&&d._callListener("change",a,o,n,e);var v=u.references[f];v&&v._callListener("change",a,o,n,e)}}else{var o=r(h,null,p);if(i(e,h,o,l)){this._callListener("change",h,o,l,e);if(c){var v=u.references[c];v&&v._callListener("change",h,o,l,e)}}}return e}function m(e){if(arguments.length>1){var t=typeof arguments[0]=="object"?arguments[0]:arguments[0].split("."),n=t.pop(),o=r(s,t,p),a=s.concat(t),f=a.join(".");t.push(n),e=arguments[1];if(o[n]===undefined&&i(e,a,o,n)){var d=u.references[f+"."+n];d&&d._callListener("change",a,o,n,e);var v=u.references[f];v&&v._callListener("change",a,o,n,e)}return o[n]}var o=r(h,null,p);if(o[l]===undefined&&i(e,h,o,l)){this._callListener("change",h,o,l,e);if(c){var v=u.references[c];v&&v._callListener("change",h,o,l,e)}}return o[l]}function g(e){var n=r(s,null,t);return arguments.length?n[e]:n}function y(e,n){var o=s.pop(),u=r(s,null,t);s.push(o),u[o]===undefined&&i({},s,u,o),u[o][e]===undefined&&(s.push(e),i(n,s,u[o],e)&&this._callListener("change",s,e,n),s.pop())}function b(e,n){var o=s.pop(),u=r(s,null,t);s.push(o),u[o]===undefined&&i({},s,u,o),s.push(e),i(n,s,u[o],e)&&this._callListener("change",s,e,n),s.pop()}function w(e){var n=s.pop(),o=r(s,null,t);s.push(n),o[n]===undefined&&i({},s,o,n);var u=s.length,a={};for(var f in e)s[u]=f,i(e[f],s,o[n],f)&&(a[f]=e[f]);s.pop(),this._callListener("change",s,null,a)}function E(t,n,r){if(!t in a)return;switch(arguments.length){case 2:this._addListener(t,e,null,arguments[1]);break;case 3:this._addListener(t,e,n,r)}}function S(e){var n=r(h,null,t),i=n[l];this._callListener(e,h,n,l,i);var s=u.references[c];s&&s._callListener("change",h,r(h,null),l,i)}function x(e){var t=sessionStorage[this.id];if(t!=undefined){var n=JSON.parse(t);e.set(n)}}function T(e){var t=localStorage[this.id];if(t!=undefined){var n=JSON.parse(t);e.set(n)}}function N(e){function t(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return undefined}var n=t(this.id);n!=undefined&&e.set(n)}function C(e){sessionStorage[this.id]=JSON.stringify(e())}function k(e){localStorage[this.id]=JSON.stringify(e())}function L(e){var t=JSON.stringify(e()),n=this.options.days;if(n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var i="; expires="+r.toGMTString()}else var i="";document.cookie=this.id+"="+t+i+"; path=/"}function A(t,n,r){r=r||{};if(/change/.test(t)){this.storechanges==undefined&&(this.storechanges={});var i="resolver."+u.named+"#"+e;r.id&&(i=r.id),r.name&&(i=r.name);switch(n){case"session":this.storechanges.session={call:C,id:i,options:r};break;case"local":this.storechanges.local={call:k,id:i,options:r};break;case"cookie":this.storechanges.cookie={call:L,id:i,options:r}}}if(/^load| load/.test(t)){this.readloads==undefined&&(this.readloads={},Resolver.readloads.push(this));var i="resolver."+u.named+"#"+e;r.id&&(i=r.id),r.name&&(i=r.name);switch(n){case"session":this.readloads.session={call:x,id:i,options:r};break;case"local":this.readloads.local={call:T,id:i,options:r};break;case"cookie":this.readloads.cookie={call:N,id:i,options:r}}}if(/unload/.test(t)){this.storeunloads==undefined&&(this.storeunloads={},Resolver.storeunloads.push(this));var i="resolver."+u.named+"#"+e;r.id&&(i=r.id),r.name&&(i=r.name);switch(n){case"session":this.storeunloads.session={call:C,id:i,options:r||{}};break;case"local":this.storeunloads.local={call:k,id:i,options:r||{}};break;case"cookie":this.storeunloads.cookie={call:L,id:i,options:r||{}}}}}function O(e,t,n,r,i){for(var s=0,o;o=this.listeners[e][s];++s)o.trigger(n,r,i);if(this.storechanges&&e=="change")for(var u in this.storechanges)this.storechanges[u].call(this)}function M(e,t,n,r){this.listeners[e].push(o(u,e,t,n,r))}var s=e.split("."),l=s.pop(),c=s.join("."),h=s.slice(0);s.push(l);var p=t=="null"||t=="undefined"?"throw":t;return d.set=v,d.get=d,d.declare=m,d.mixin=w,d.getEntry=g,d.declareEntry=y,d.setEntry=b,d.on=E,d.trigger=S,d.stored=A,d.listeners=n||f(),d._callListener=O,d._addListener=M,d}switch(typeof e){case"undefined":return Resolver["default"];case"string":if(Resolver[e]==undefined){if(t==null&&arguments.length>1)return t;n==undefined&&(n=t,t={}),Resolver[e]=Resolver(t,n),Resolver[e].named=e}return Resolver[e]}n=t||{},t=e,u.get=u,u.named=n.name,n.name&&(Resolver[n.name]=u),u.namespace=arguments[0],u.references={};var a={get:!0,change:!0,"undefined":!0};return u.on=function(e,t,n,r){if(!e in a)return;switch(arguments.length){case 2:break;case 3:typeof arguments[1]=="string"&&this.reference(t).on(e,null,arguments[2]);break;case 4:this.reference(t).on(e,n,r)}},u.declare=function(e,t,n){var s;typeof e=="object"&&e.join?(s=e,e=e.join(".")):s=e.split(".");var o=s.pop(),a=r(s,null,n);if(a[o]===undefined){if(i(t,s,a,o)){var f=u.references[e];f&&f._callListener("change",s,a,o,t);var l=s.join("."),c=u.references[l];c&&c._callListener("change",s,a,o,t)}return t}return a[o]},u.set=function(e,t,n){var s;typeof e=="object"&&e.join?(s=e,e=e.join(".")):s=e.split(".");var o=s.pop(),a=r(s,null,n);if(i(t,s,a,o)){var f=u.references[e];f&&f._callListener("change",s,a,o,t);var l=s.join("."),c=u.references[l];c&&c._callListener("change",s,a,o,t)}return t},u.reference=function(e,t){typeof e=="object"&&(t=e.onundefined,e=e.name);var n=t?e+":"+t:e,r=this.references[n];if(r)return r;var i=this.references[e];if(i==undefined){i=this.references[e]=l(e,t);if(n==e)return i}return this.references[n]=l(e,t,i.listeners)},u.proxy=function(e,t,n){t.on("change",n,this,function(t){t.data.set(e,t.value)})},u.override=function(e,t){t=t||{};var n=t.name||this.named;return Resolver[n]=Resolver(e,t),Resolver[n].named=n,Resolver[n]},u.destroy=function(){for(var e in this.references)delete this.references[e]},n.mixinto&&(n.mixinto.get==null&&(n.mixinto.get=u),n.mixinto.declare==null&&(n.mixinto.declare=u.declare),n.mixinto.set==null&&(n.mixinto.set=u.set),n.mixinto.reference==null&&(n.mixinto.reference=u.reference),n.mixinto.override==null&&(n.mixinto.override=u.override),n.mixinto.on==null&&(n.mixinto.on=u.on)),u}function Generator(e,t){function r(e,t,r,i,s,o,u,a,f,c,h,p){var d;if(l.info.existing){var v=l.info.identifier.apply(l.info,arguments);if(v in l.info.existing)return d=l.info.existing[v];d=l.info.existing[v]=new l.type,d.constructor=n.constructors[0]}else d=new l.type;d.__context__={generator:l,info:n,args:[e,t,r,i,s,o,u,a,f,c,h,p]};for(var f=0,m;m=n.constructors[f];++f)m.apply(d,d.__context__.args);return delete d.__context__,d}function i(t,n,r,i,s,o,u,a,f,c,h,p){var d=e.apply(l,arguments);return d}function s(t,r,i,s,o,u,a,f,c,h,p,d){"no strict";var v;if(l.info.existing){var m=l.info.identifier.apply(l.info,arguments);if(m in l.info.existing)return v=l.info.existing[m];v=l.info.existing[m]=n.extendsBuiltin[arguments.length].apply(null,arguments)}else{v=n.extendsBuiltin[arguments.length].apply(null,arguments);for(var g in l.prototype)v[g]=l.prototype[g];e.prototype=n.extendsBuiltin.ctr.prototype}v.__context__={generator:l,info:n,args:[t,r,i,s,o,u,a,f,c,h,p,d]};for(var c=0,y;y=n.constructors[c];++c)n.extendsBuiltin.ctr!==y&&y.apply(v,v.__context__.args);return delete v.__context__,v}function o(){var e=this.__context__.args;for(var t=0,r;r=l.args[t];++t)if(e[t]===undefined){var i=l.args[t].name,s=l.args[t]["default"];i in n.restrictedArgs?e[t]=n.restrictedArgs[i]:s&&(e[t]=s)}}function u(){for(var e in n.presets)this[e]=n.presets[e]}function a(){var e=this.__context__.generator.args;for(var t=0,n;n=e[t];++t)n.preset&&(this[n.preset]=arguments[t])}function f(e,t){return function(n,r,i,s,o,u,a,f,l,c,h,p){switch(t){case 1:return new e(n);case 2:return new e(n,r);case 3:return new e(n,r,i);case 4:return new e(n,r,i,s);case 5:return new e(n,r,i,s,o);case 6:return new e(n,r,i,s,o,u);case 7:return new e(n,r,i,s,o,u,a);case 8:return new e(n,r,i,s,o,u,a,f);case 9:return new e(n,r,i,s,o,u,a,f,l);case 10:return new e(n,r,i,s,o,u,a,f,l,c);case 11:return new e(n,r,i,s,o,u,a,f,l,c,h);case 12:return new e(n,r,i,s,o,u,a,f,l,c,h,p);default:return new e}}}function c(e,t,n,r,i,s){if(t==undefined){if(typeof e=="string"){var o=this.variants[e];if(o&&o.generator)return o.generator}else for(var u=0,a;a=e[u];++u){var o=this.variants[a];if(o&&o.generator)return o.generator}var o=this.variants[""];return o&&o.generator?o.generator:this}var f=t.handlers,l=t.bases,c=Generator(t);return this.variants[e]={func:t,generator:c,handlers:f||{},bases:l||[],additional:[n,r,i,s]},c}function h(){var e=[];e.push("function "),e.push(this.info.package),e.push("."),e.push(this.info.symbol),e.push("(");var t=[];for(var n=0,r;r=this.args[n];++n)t.push(r.name+":"+r.variantName);return e.push(t.join(",")),e.push(")"),e.push(" {"),e.push("<br>  "),e.push("<br>  }"),e.push("<br>  "),e.join("")}function p(e,t){if(e.singleton)this.info.singleton=!0,this.info.lifecycle=e.lifecycle,this.info.existing={},this.info.identifier=function(){return 0},this.info.restricted||(Generator.restricted.push(l),this.info.restricted=!0);else if(e.identifier){var n=typeof e.identifier=="string"?e.identifier:"identifier";this.info.identifier=this.info.constructors[-1][n],this.info.existing={},this.info.restricted||(Generator.restricted.push(l),this.info.restricted=!0)}else e.size!=undefined?this.info.restricted||(Generator.restricted.push(l),this.info.restricted=!0):(this.info.singleton=!1,this.info.existing=null);return this.info.restrictedArgs=t,t&&this.info.constructors.unshift(o),this}if(e.__generator__)return e.__generator__;var n={arguments:{},presets:{},options:t,constructors:[]},l=function(t){function N(){}var o=t.length-1,l=t[o];typeof l=="function"?l={}:--o,n.options=l;var c=e.bases||[];if(o>0){c=[];for(var h=o,p;h>=1&&(p=t[h]);--h){switch(p){case Array:case String:n.extendsBuiltin={ctr:p};for(var d=12;d>=0;--d)n.extendsBuiltin[d]=f(p,d)}c.push(p)}}var v=n.constructors;for(var h=0,m;m=c[h];++h){if(m.bases&&m.info&&m.info.constructors){for(var g=0,y;y=m.bases[g];++g)v.push(m.bases[g]);m=c[h]=m.info.constructors[-1]}v.push(m)}v.push(e),v[-1]=e;var b=r;l.alloc===!1?b=i:n.extendsBuiltin&&(b=s),b.__generator__=b,b.info=n,b.bases=c,b.args=l.args||e.args||[];var w=!1;for(var h=0,E;E=b.args[h];++h)E.no=h,n.arguments[E.name]=E,E.preset&&(w=!0);n.constructors.unshift(u),w&&n.constructors.unshift(a);if(c.length){var S=Generator(c[0]),x=b.prototype=new S.type;for(var h=1,m;m=c[h];++h)for(var T in m.prototype)x[T]=m.prototype[T]}b.type=N,b.type.prototype=b.prototype;for(var T in e.prototype)b.prototype[T]=e.prototype[T];return e.prototype=b.prototype,b}(arguments);return Resolver(l.prototype,{mixinto:l,generator:Generator.ObjectGenerator}),l.presets=Resolver(n.presets),l.variant=c,l.variants={},l.toRepr=h,l.restrict=p,e.__generator__=l,l}Resolver.readloads=[],Resolver.storeunloads=[],Resolver.hasGenerator=function(e){return e.__generator__?!0:typeof e=="function"&&typeof e.type=="function"?!0:!1},Resolver({},{name:"default"}),Generator.restricted=[],Generator.ObjectGenerator=Generator(Object),function(e){"use strict";function n(e){this.options=e||{},this.name=this.options.name,this.preset=this.options.preset===!0?this.name:this.options.preset}function r(e){this.type=String,this.variantName="String"}function i(e){this.type=Number,this.variantName="Number"}function s(e){this.type=Date,this.variantName="Date"}function o(e){this.type=Boolean,this.variantName="Boolean"}function u(e){this.type=Object,this.variantName="Object"}function a(e){this.type=Array,this.variantName="Array"}function f(e,t){if(e.indexOf)return e.indexOf(t)>=0;for(var n=0,r;r=e[n];++n)if(r==t)return!0;return!1}function l(){this._set={};for(var e=this.length-1;e>=0;--e){var t=this[e];(this._set[t]||t==="")&&this.splice(e,1),t!=""&&t!=null&&(this._set[t]=!0)}}function c(){}function p(){for(var e=0,t;t=Generator.restricted[e];++e)t.info.lifecycle=="page"&&t()}function d(){for(var e=0,t;t=Generator.restricted[e];++e){var n=t.info.constructors[-1].discarded;for(var r in t.info.existing){var i=t.info.existing[r];n&&n.call(t,i)}t.info.constructors[-1].__generator__=undefined,t.__generator__=undefined}}function m(){if(v)return;v=!0;for(var e=0,n;n=Resolver.readloads[e];++e)for(var r in n.readloads)n.readloads[r].call(n);try{t("_queueDelayedAssets")(),t.set("_queueDelayedAssets",function(){}),p()}catch(i){console.error("Failed to launch delayed assets and singletons",i)}}function g(){}function y(){for(var e=0,t;t=Resolver.storeunloads[e];++e)for(var n in t.storeunloads)t.storeunloads[n].call(t);d();for(var n in Resolver)typeof Resolver[n].destroy=="function"&&Resolver[n].destroy()}function b(){try{e.document.documentElement.doScroll("left")}catch(t){setTimeout(b,1);return}m()}function w(){if(e.document.addEventListener){var t=function(){e.document.removeEventListener("DOMContentLoaded",t,!1),m()};e.document.addEventListener("DOMContentLoaded",t,!1),e.addEventListener("load",m,!1)}else if(e.document.attachEvent){var n=function(){e.document.readyState==="complete"&&(e.document.detachEvent("onreadystatechange",n),m())};e.document.attachEvent("onreadystatechange",n),e.attachEvent("onload",m);var r=!1;try{r=e.frameElement==null}catch(i){}e.document.documentElement.doScroll&&r&&b()}}function S(){function e(e,t){}E.log=function(){e("none",arguments)},E.trace=function(){e("trace",arguments)},E.debug=function(){e("debug",arguments)},E.info=function(){e("info",arguments)},E.warn=function(){e("warn",arguments)},E.error=function(){e("error",arguments)},E.group=function(){e("group",arguments)},E.groupEnd=function(){e("groupEnd",arguments)}}function x(){E.log=function(){window.console.log.apply(window.console,arguments)},E.trace=function(){window.console.trace()},E.debug=function(){(window.console.debug||window.console.info).apply(window.console,arguments)},E.info=function(){window.console.info.apply(window.console,arguments)},E.warn=function(){window.console.warn.apply(window.console,arguments)},E.error=function(){window.console.error.apply(window.console,arguments)},window.console.debug==undefined&&(E.log=function(e){window.console.log(e)},E.trace=function(e){window.console.trace()},E.debug=function(e){window.console.log(e)},E.info=function(e){window.console.info(e)},E.warn=function(e){window.console.warn(e)},E.error=function(e){window.console.error(e)})}function N(e,t){var n=null,r=null;typeof e=="object"&&(n=e.phrase,r=e.context||null,e=e.key);var i=T("locales"),s=T("locale"),o,u,a;if(e){a=T.get(["keys",r,e],"undefined");while(o==undefined&&a&&s)o=a[s],i[s]?s=i[s].chain:s=null}else if(n){a=T.get(["phrases",r,n],"undefined");while(o==undefined&&a&&s)o=a[s],i[s]?s=i[s].chain:s=null}if(o){if(t&&a.begin&&a.end)for(var f in t)o=o.replace(a.begin+f+a.end,t[f]);return o}return n}var t=Resolver("essential",{});t.set("Type",Generator(n)),t.set("StringType",Generator(r,n)),t.namespace.Type.variant("String",t.namespace.StringType),t.set("NumberType",Generator(i,n)),t.namespace.Type.variant("Number",t.namespace.NumberType),t.set("DateType",Generator(s,n)),t.namespace.Type.variant("Date",t.namespace.DateType),t.set("BooleanType",Generator(o,n)),t.namespace.Type.variant("Boolean",t.namespace.BooleanType),t.set("ObjectType",Generator(u,n)),t.namespace.Type.variant("Object",t.namespace.ObjectType),t.set("ArrayType",Generator(a,n)),t.namespace.Type.variant("Array",t.namespace.ArrayType),t.declare("arrayContains",f),t.set("ArraySet",Generator(l,Array)),l.prototype.item=function(e){return this[e]},l.prototype.contains=l.prototype.has=function(e){var t=this._set[e];return t===e?!0:typeof t!="object"||!t.multiple_values?!1:f(t,e)},l.prototype.set=function(e,t){typeof e=="object",t?this.add(e):this.remove(e)},l.prototype.add=function(e){var t=this._set[e];if(t===undefined)this._set[e]=e,this.push(e);else{if(t===e)return;if(typeof t!="object"||!t.multiple_values)t=this._set[e]=[t],t.multiple_values=!0;f(t,e)||(t.push(e),this.push(e))}},l.prototype.remove=function(e){var t=this._set[e];if(t===undefined)return;if(t===e){for(var n=this.length-1;n>=0;--n)this[n]===e&&this.splice(n,1);delete this._set[e];return}if(typeof t!="object"||!t.multiple_values)return;for(var n=this.length-1;n>=0;--n)this[n]===e&&this.splice(n,1);for(var n=t.length-1;n>=0;--n)t[n]===e&&t.splice(n,1);t.length==0&&delete this._set[e]},l.prototype.toggle=function(e){this.has(e)?this.remove(e):this.add(e)},l.prototype.separator=" ",l.prototype.toString=function(){return this.join(this.separator)};var h=t.set("DOMTokenList",Generator(c,l,Array));h.prototype.emulateClassList=!0,h.set=function(e,t,n){typeof t=="object",n?e.add(t):e.remove(t)},h.mixin=function(e,t){if(t.split){var n=t.split(" ");for(var r=0,i;i=n[r];++r)e.add(i);return}if(t.length){for(var r=0,i;i=t[r];++r)e.add(i);return}for(var s in t)e.set(s,t[s])},h.eitherClass=function(e,t,n,r){var i=e.classList,s=r?n:t,o=r?t:n;s&&i.remove(s),o&&i.add(o),i.emulateClassList&&(e.className=e.classList.join(e.classList.separator))},t.set("instantiatePageSingletons",p),t.set("_queueDelayedAssets",function(){});var v=!1;window.device||(w(),e.addEventListener?e.addEventListener("load",g,!1):e.attachEvent("onload",g),e.addEventListener?e.addEventListener("unload",y,!1):e.attachEvent("onunload",y));var E=t.declare("console",{});t.declare("setStubConsole",S),t.declare("setWindowConsole",x),window.console?x():S();var T=Resolver("translations",{});T.declare("locale","en"),T.declare("locales",{}),T.declare("keys",{}),T.declare("phrases",{}),T.translate=N,T._=N,t.set("translate",N)}(window),function(){function i(){this._object=e&&!r?new e:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function s(){return new i}function o(e){e._object.send(e._data);if(t&&!e._async){e.readyState=s.OPENED,f(e);while(e.readyState<s.DONE){e.readyState++,u(e);if(e._aborted)return}}}function u(e){s.onreadystatechange&&s.onreadystatechange.apply(e),e.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function a(e){var t=e.responseXML,r=e.responseText;n&&r&&t&&!t.documentElement&&e.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.validateOnParse=!1,t.loadXML(r));if(t)if(n&&t.parseError!==0||!t.documentElement||t.documentElement&&t.documentElement.tagName=="parsererror")return null;return t}function f(e){try{e.responseText=e._object.responseText}catch(t){}try{e.responseXML=a(e._object)}catch(t){}try{e.status=e._object.status}catch(t){}try{e.statusText=e._object.statusText}catch(t){}}function l(e){e._object.onreadystatechange=new window.Function}var e=window.XMLHttpRequest,t=!!window.controllers,n=window.document.all&&!window.opera,r=n&&window.navigator.userAgent.match(/MSIE 7.0/);s.prototype=i.prototype,t&&e.wrapped&&(s.wrapped=e.wrapped),s.UNSENT=0,s.OPENED=1,s.HEADERS_RECEIVED=2,s.LOADING=3,s.DONE=4,s.prototype.readyState=s.UNSENT,s.prototype.responseText="",s.prototype.responseXML=null,s.prototype.status=0,s.prototype.statusText="",s.prototype.priority="NORMAL",s.prototype.onreadystatechange=null,s.onreadystatechange=null,s.onopen=null,s.onsend=null,s.onabort=null,s.prototype.open=function(e,r,i,o,a){delete this._headers,arguments.length<3&&(i=!0),this._async=i;var c=this,h=this.readyState,p=null;n&&i&&(p=function(){h!=s.DONE&&(l(c),c.abort())},window.attachEvent("onunload",p)),s.onopen&&s.onopen.apply(this,arguments),arguments.length>4?this._object.open(e,r,i,o,a):arguments.length>3?this._object.open(e,r,i,o):this._object.open(e,r,i),this.readyState=s.OPENED,u(this),this._object.onreadystatechange=function(){if(t&&!i)return;c.readyState=c._object.readyState,f(c);if(c._aborted){c.readyState=s.UNSENT;return}c.readyState==s.DONE&&(delete c._data,l(c),n&&i&&window.detachEvent("onunload",p),h!=c.readyState&&u(c),h=c.readyState)}},s.prototype.send=function(e){s.onsend&&s.onsend.apply(this,arguments),arguments.length||(e=null),e&&e.nodeType&&(e=window.XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=e,o(this)},s.prototype.sendEncoded=function(e){s.onsend&&s.onsend.apply(this,arguments),arguments.length||(e=null);if(e&&typeof e=="object"){var t=this._headers["Content-Type"];t||(this._object.setRequestHeader("Content-Type","text/json"),t="text/json");switch(t){case"text/json":e=JSON.stringify(e);break;case"application/x-www-form-urlencoded":var n=[];for(var r in e)n.push(r+"="+encodeURIComponent(e[r]));e=n.join("&")}}this._data=e,o(this)},s.prototype.abort=function(){s.onabort&&s.onabort.apply(this,arguments),this.readyState>s.UNSENT&&(this._aborted=!0),this._object.abort(),l(this),this.readyState=s.UNSENT,delete this._data},s.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},s.prototype.getResponseHeader=function(e){return this._object.getResponseHeader(e)},s.prototype.setRequestHeader=function(e,t){return this._headers||(this._headers={}),this._headers[e]=t,this._object.setRequestHeader(e,t)},s.prototype.addEventListener=function(e,t,n){for(var r=0,i;i=this._listeners[r];r++)if(i[0]==e&&i[1]==t&&i[2]==n)return;this._listeners.push([e,t,n])},s.prototype.removeEventListener=function(e,t,n){for(var r=0,i;i=this._listeners[r];r++)if(i[0]==e&&i[1]==t&&i[2]==n)break;i&&this._listeners.splice(r,1)},s.prototype.dispatchEvent=function(e){var t={type:e.type,target:this,currentTarget:this,eventPhase:2,bubbles:e.bubbles,cancelable:e.cancelable,timeStamp:e.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}};t.type=="readystatechange"&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[t]);for(var n=0,r;r=this._listeners[n];n++)r[0]==t.type&&!r[2]&&(r[1].handleEvent||r[1]).apply(this,[t])},s.prototype.toString=function(){return"[object XMLHttpRequest]"},s.toString=function(){return"[XMLHttpRequest]"},Resolver("essential").set("XMLHttpRequest",s)}(),function(){"use strict";function HTMLElement(e,t,n,r){var i=2,s=arguments.length-1,o=e,u=t,a=arguments[s],f=document;typeof a=="object"&&"doctype"in a&&s>1&&(f=a,--s),typeof o=="object"&&(u=o,o=u.tagName||"span",--i);var l=f.createElement(o);for(var c in u)switch(c){case"tagName":break;case"class":u[c]!==undefined&&(l.className=u[c]);break;case"style":u[c]!==undefined&&(l.style.cssText=u[c]);break;case"id":case"className":case"rel":case"lang":case"language":case"src":case"type":u[c]!==undefined&&(l[c]=u[c]);break;case"onload":regScriptOnload(l,u.onload);break;default:l.setAttribute(c,u[c])}var h=[];for(var p=i;p<=s;++p){var d=arguments[p];typeof d=="object"&&"length"in d?h.concat(d):typeof d=="string"&&h.push(arguments[p])}return h.length&&(l.innerHTML=h.join("")),l}function readElementState(e,t){t.disabled=e.disabled||!1,t.readOnly=e.readOnly||!1,t.hidden=e.getAttribute("hidden")!=null,t.required=e.getAttribute("required")!=null}function reflectProperty(e,t,n){e[t]=!!n}function reflectAttribute(e,t,n){if(typeof e[t]=="boolean"){e[t]=!!n;return}n?e.setAttribute(t,t):e.removeAttribute(t)}function reflectAria(e,t,n){n?e.setAttribute("aria-"+t,t):e.removeAttribute("aria-"+t)}function reflectAttributeAria(e,t,n){typeof e[t]=="boolean"?e[t]=!!n:n?e.setAttribute(t,t):e.removeAttribute(t),n?e.setAttribute("aria-"+t,t):e.removeAttribute("aria-"+t)}function reflectElementState(e){var t=e.data,n=state_treatment[e.symbol];n&&n.reflect(t,e.symbol,e.value);var r=t.stateful("map.class","undefined");r&&DOMTokenList_eitherClass(t,r.state[e.symbol],r.notstate[e.symbol],e.value)}function reflectElementClass(e){var t=[];t[0]=state.disabled?"state-disabled":""}function ClassForState(){}function ClassForNotState(){}function make_Stateful_fireAction(e){return function(){var t=MutableEvent({target:e}).withActionInfo();fireAction(t)}}function Stateful_setField(e){return this.field=e,e}function Stateful_reflectStateOn(e,t){var n=e.stateful=this;e._cleaners==undefined&&(e._cleaners=[]),arrayContains(e._cleaners,statefulCleaner)||e._cleaners.push(statefulCleaner),t!=0&&readElementState(e,n("state")),n.on("change","state",e,reflectElementState),nativeClassList||(e.classList=DOMTokenList(),DOMTokenList_mixin(e.classList,e.className));var r=e.stateful("map.class","undefined");r&&StatefulResolver.updateClass(n,e)}function statefulCleaner(){this.stateful&&(this.stateful.field&&(this.stateful.field.destroy(),this.stateful.field.discard()),this.stateful.field=undefined,this.stateful.destroy(),this.stateful.fireAction=undefined,this.stateful.setField=undefined,this.stateful=undefined)}function StatefulResolver(e,t){if(e&&e.stateful)return e.stateful;var n={};typeof t=="object"&&(n=t,t=t.mapClassForState);var r=Resolver({state:{}},n);return t&&(r.set("map.class.state",new ClassForState),r.set("map.class.notstate",new ClassForNotState)),r.fireAction=make_Stateful_fireAction(e),r.setField=Stateful_setField,r.reflectStateOn=Stateful_reflectStateOn,e&&r.reflectStateOn(e),r}function regScriptOnload(e,t){e.onload=function(e){this.onloadDone||(this.onloadDone=!0,t.call(this,e||event))},e.onreadystatechange=function(e){("loaded"===this.readyState||"complete"===this.readyState)&&!this.onloadDone&&(this.onloadDone=!0,t.call(this,e||event))}}function HTMLScriptElement(e,t){return HTMLElement("SCRIPT",e,t)}function delayedScriptOnload(e){function t(e){var t=this;setTimeout(function(){pageResolver.set(["state","loadingScriptsUrl",t.src.replace(baseUrl,"")],!1)},0)}return t}function _queueDelayedAssets(){ApplicationConfig();var links=document.getElementsByTagName("link");for(var i=0,l;l=links[i];++i)if(l.rel=="pastload"||l.rel=="preload"){var attrsStr=l.getAttribute("attrs"),attrs={};attrsStr&&eval("attrs = {"+attrsStr+"}"),attrs.type=l.getAttribute("type")||"text/javascript",attrs.src=l.getAttribute("src"),attrs.onload=delayedScriptOnload(l.rel);var relSrc=attrs.src.replace(baseUrl,"");if(l.rel=="preload"){var langOk=!0;l.lang&&(langOk=l.lang==pageResolver("state.lang")),langOk&&(pageResolver.set(["state","preloading"],!0),pageResolver.set(["state","loadingScripts"],!0),pageResolver.set(["state","loadingScriptsUrl",relSrc],l),document.body.appendChild(HTMLScriptElement(attrs)),l.added=!0)}else{var langOk=!0;l.lang&&(langOk=l.lang==pageResolver("state.lang")),langOk&&(pageResolver.set(["state","loadingScripts"],!0),pageResolver.set(["state","loadingScriptsUrl",relSrc],l),l.attrs=attrs)}}if(!pageResolver(["state","preloading"])){var scripts=pageResolver(["state","loadingScriptsUrl"]);for(var n in scripts){var link=scripts[n];if(link.rel=="pastload"){var langOk=!0;link.lang&&(langOk=link.lang==pageResolver("state.lang")),langOk&&(document.body.appendChild(HTMLScriptElement(link.attrs)),link.added=!0)}}}pageResolver(["state","loadingScripts"])&&console.debug("loading phased scripts");var metas=document.getElementsByTagName("meta");for(var i=0,m;m=metas[i];++i)switch((m.getAttribute("name")||"").toLowerCase()){case"enhanced roles":DocumentRoles.useBuiltins((m.getAttribute("content")||"").split(" "))}}function configRequired(e){pageResolver.set(["state","loadingConfig"],!0),pageResolver.set(["state","loadingConfigUrl",e],!0)}function configLoaded(e){pageResolver.set(["state","loadingConfigUrl",e],!1)}function _makeEventCleaner(e,t){function n(){if(this.removeEventListener)for(var n in e)this.removeEventListener(n,e[n],t),delete e[n];else for(var n in e)this.detachEvent("on"+n,e[n]),delete e[n]}return n.listeners=e,n}function copyKeyEvent(e){this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey,this.metaKey=e.metaKey,this.charCode=e.charCode}function copyInputEvent(e){copyKeyEvent.call(this,e)}function copyNavigateEvent(e){copyKeyEvent.call(this,e)}function copyMouseEvent(e){this.clientX=e.clientX,this.clientY=e.clientY,this.screenX=e.screenX,this.screenY=e.screenY,this.button=BUTTON_MAP[e.button],this.buttons=e.button}function copyMouseEventOverOut(e){copyMouseEvent.call(this,e),this.fromElement=e.fromElement,this.toElement=e.toElement,this.relatedTarget=e.relatedTarget}function _MutableEvent(e){this._original=e,this.type=e.type,this.target=e.target||e.srcElement,this.currentTarget=e.currentTarget||e.target,EVENTS[e.type].copyEvent.call(this,e)}function MutableEvent(e){function t(){}var n;return e&&e.srcElement&&document.createEventObject?n=new _MutableEvent(e):window.event&&window.event.srcElement&&document.createEventObject&&e==undefined?n=new _MutableEvent(window.event):(t.prototype=e||window.event,n=new t,n.withActionInfo=MutableEvent_withActionInfo,n.withDefaultSubmit=MutableEvent_withDefaultSubmit),n}function addEventListeners(e,t,n){function r(e,t){var n=typeof t=="object",r=n?t:e,i=n?t.handleEvent:t;return function(){return i.call(e,MutableEvent(window.event))}}e._cleaners==undefined&&(e._cleaners=[]);if(e.addEventListener){for(var i in t)e.addEventListener(i,t[i],n||!1);e._cleaners.push(_makeEventCleaner(t,n||!1))}else{var s={};for(var i in t)s[i]=r(e,t[i]),e.attachEvent("on"+i,s[i]);e._cleaners.push(_makeEventCleaner(s,n||!1))}}function callCleaners(e){var t=e._cleaners;if(t!=undefined){for(var n=0,r;r=t[n];++n)r.call(e);t=undefined}}function cleanRecursively(e){for(var t=e.firstChild;t;t=t.nextSibling)callCleaners(t),cleanRecursively(t)}function DialogAction(e){this.actionName=e}function resizeTriggersReflow(e){DocumentRoles()._resize_descs()}function enhanceUnhandledElements(){var e=ApplicationConfig(),t=DocumentRoles.presets("handlers");DocumentRoles()._enhance_descs()}function defaultButtonClick(e){e=MutableEvent(e).withActionInfo(),e.commandElement&&fireAction(e)}function fireAction(e){var t=e.actionElement,n=e.action,r=e.commandName;t.actionVariant||(n?n=n.replace(baseUrl,""):n="submit",t.actionVariant=DialogActionGenerator.variant(n)(n));if(t.actionVariant[r])t.actionVariant[r](t);else{var i=r.replace("-","_").replace(" ","_");t.actionVariant[i]&&t.actionVariant[i](t)}}function _StatefulField(e,t){}function _TimeField(){}function _CommandField(e,t,n){}function enhanceStatefulFields(e){for(var t=e.firstChild;t;t=t.nextSibling){var n=t.name||t.getAttribute("data-name")||t.getAttribute("name");if(n){var r=t.getAttribute("role"),i=[];r?(t.type&&i.push("*[role="+r+",type="+t.type+"]"),i.push("*[role="+r+"]")):(t.type&&i.push(t.tagName.toLowerCase()+"[type="+t.type+"]"),i.push(t.tagName.toLowerCase()));var s=StatefulResolver(t,!0),o=s.setField(StatefulField.variant(i)(n,s,r));t._cleaners==undefined&&(t._cleaners=[]),arrayContains(t._cleaners,statefulCleaner)||t._cleaners.push(statefulCleaner)}enhanceStatefulFields(t)}}function _DocumentRoles(e,t){this.handlers=e||this.handlers||{enhance:{},discard:{},layout:{}},this._on_event=[],t=t||document;var n=ApplicationConfig();window.addEventListener?(window.addEventListener("resize",resizeTriggersReflow,!1),t.body.addEventListener("orientationchange",resizeTriggersReflow,!1),t.body.addEventListener("click",defaultButtonClick,!1)):(window.attachEvent("onresize",resizeTriggersReflow),t.body.attachEvent("onclick",defaultButtonClick)),t.querySelectorAll?this.descs=this._role_descs(t.querySelectorAll("*[role]")):this.descs=this._role_descs(t.getElementsByTagName("*")),this._enhance_descs()}function form_onsubmit(e){var t=this;return setTimeout(function(){t.submit(e)},0),!1}function form_submit(e){document.activeElement&&document.activeElement.blur(),this.blur(),dialog_submit.call(this,e)}function dialog_submit(e){e==undefined&&(e=MutableEvent().withDefaultSubmit(this)),e.commandElement&&fireAction(e)}function MutableEvent_withDefaultSubmit(e){var t="trigger",n=null;if(e.elements){for(var r=0,i;i=e.elements[r];++r)if(i.type=="submit"){t=i.name,n=i;break}}else{var s=e.getElementsByTagName("button");for(var r=0,i;i=s[r];++r)if(i.type=="submit"){t=i.name,n=i;break}var o=e.getElementsByTagName("input");if(n)for(var r=0,i;i=o[r];++r)if(i.type=="submit"){t=i.name,n=i;break}}return this.action=e.action,this.actionElement=e,this.commandElement=n,this.commandName=t,this}function toolbar_submit(e){return dialog_submit.call(this,e)}function form_blur(){for(var e=0,t;t=this.elements[e];++e)t.blur()}function form_focus(){for(var e=0,t;t=this.elements[e];++e){var n=t.getAttribute("autofocus");if(n==undefined)continue;t.focus();break}}function MutableEvent_withActionInfo(){var e=this.target;while(e){if(e.getElementById||e.getAttribute==undefined)return this;var t=e.getAttribute("role");switch(t){case"button":case"link":case"menuitem":this.stateful=StatefulResolver(e,!0),this.commandRole=t,this.commandElement=e,this.ariaDisabled=e.getAttribute("aria-disabled")!=null,this.commandName=e.getAttribute("data-name")||e.getAttribute("name"),e=null;break;case null:switch(e.tagName){case"BUTTON":case"button":e.type=="submit"&&(this.stateful=StatefulResolver(e,!0),this.commandElement=e,this.ariaDisabled=e.getAttribute("aria-disabled")!=null,this.commandName=e.getAttribute("data-name")||e.getAttribute("name"),e=null)}}e&&(e=e.parentNode)}if(this.commandElement==undefined)return this;e=this.commandElement;while(e){var n=e.getAttribute("action");n&&(this.action=n,this.actionElement=e,e=null),e&&(e=e.parentNode)}return this}function dialog_button_click(e){e=MutableEvent(e).withActionInfo();if(e.commandElement){if(e.stateful("state.disabled"))return;if(e.ariaDisabled)return;this.submit(e),e.stopPropagation()}if(e.defaultDisabled)return!1}function applyDefaultRole(e){for(var t=0,n;n=e[t];++t)switch(n.tagName){case"button":case"BUTTON":n.setAttribute("role","button");break;case"a":case"A":n.setAttribute("role","link")}}function forceNoSubmitType(e){for(var t=0,n;n=e[t];++t)n.type=="submit"&&(n.setAttribute("type","button"),n.type=="submit"&&(n.type="submit"))}function _lookup_generator(e,t){var n=Resolver(t||"default")(e,"null");return n?Generator(n):null}function Layouter(e,t,n){}function StageLayouter(e,t,n){this.key=e,this.type=n.layouter,this.areaNames=n["area-names"],this.activeArea=null,this.baseClass=n["base-class"],this.baseClass?this.baseClass+=" ":this.baseClass="",stages.push(this)}function Laidout(e,t,n){}function MemberLaidout(e,t,n){this.key=e,this.type=n.laidout,this.areaNames=n["area-names"],this.baseClass=n["base-class"],this.baseClass?this.baseClass+=" ":this.baseClass="",t.className=this.baseClass+t.className}function activateArea(e){if(!_liveAreas){_activeAreaName=e;return}for(var t=0,n;n=stages[t];++t)n.updateActiveArea(e);_activeAreaName=e,document.body&&DocumentRoles()._layout_descs()}function getActiveArea(){return _activeAreaName}function bringLive(){var e=ApplicationConfig();_liveAreas=!0,e.state.set("livepage",!0)}function onPageLoad(e){var t=ApplicationConfig();_liveAreas=!0,t.state.set("livepage",!0)}function _ApplicationConfig(){this.resolver=pageResolver;var e=this.resolver.reference("state","undefined");for(var t in this.state)e.set(t,this.state[t]);this.state=e,e.on("change",this,this.onStateChange),this.resolver.on("change","state.loadingScriptsUrl",this,this.onLoadingScripts),this.resolver.on("change","state.loadingConfigUrl",this,this.onLoadingConfig),this.config=this.resolver.reference("config","undefined"),this._gather(),this._apply(),setTimeout(bringLive,60)}var essential=Resolver("essential",{}),ObjectType=essential("ObjectType"),console=essential("console"),ArraySet=essential("ArraySet"),DOMTokenList=essential("DOMTokenList"),baseUrl=location.href.substring(0,location.href.split("?")[0].lastIndexOf("/")+1);essential.set("HTMLElement",HTMLElement);var nativeClassList=!!document.documentElement.classList,state_treatment={disabled:{index:0,reflect:reflectAria},readOnly:{index:1,reflect:reflectProperty},hidden:{index:2,reflect:reflectAttribute},required:{index:3,reflect:reflectAttributeAria}},DOMTokenList_eitherClass=essential("DOMTokenList.eitherClass"),DOMTokenList_mixin=essential("DOMTokenList.mixin");ClassForState.prototype.disabled="state-disabled",ClassForState.prototype.readOnly="state-readOnly",ClassForState.prototype.hidden="state-hidden",ClassForState.prototype.required="state-required",ClassForNotState.prototype.disabled="",ClassForNotState.prototype.readOnly="",ClassForNotState.prototype.hidden="",ClassForNotState.prototype.required="",essential.declare("StatefulResolver",StatefulResolver);var pageResolver=StatefulResolver(null,{name:"page",mapClassForState:!0});pageResolver.declare("config",{}),pageResolver.reference("state").mixin({livepage:!1,authenticated:!0,authorised:!0,connected:!0,online:!0,preloading:!1,loading:!0,loadingConfig:!1,loadingScripts:!1,configured:!0,fullscreen:!1,launching:!1,launched:!1,lang:document.documentElement.lang||"en",loadingScriptsUrl:{},loadingConfigUrl:{}}),pageResolver.reference("connection").mixin({loadingProgress:"",status:"connected",detail:"",userName:"",logStatus:!1}),pageResolver.reference("map.class.state").mixin({authenticated:"authenticated",loading:"loading",launched:"launched",launching:"launching",livepage:"livepage"}),pageResolver.reference("map.class.notstate").mixin({authenticated:"login"}),StatefulResolver.updateClass=function(e,t){var n={};for(var r in state_treatment)n[r]=!0;for(var r in e("map.class.state"))n[r]=!0;for(var r in e("map.class.notstate"))n[r]=!0;for(var r in n)e.reference("state."+r,"null").trigger("change")},essential.set("HTMLScriptElement",HTMLScriptElement),essential.set("_queueDelayedAssets",_queueDelayedAssets),essential.set("configRequired",configRequired),essential.set("configLoaded",configLoaded);var BUTTON_MAP={1:0,2:2,4:1},EVENTS={click:{copyEvent:copyMouseEvent},dblclick:{copyEvent:copyMouseEvent},contextmenu:{copyEvent:copyMouseEvent},mousemove:{copyEvent:copyMouseEvent},mouseup:{copyEvent:copyMouseEvent},mousedown:{copyEvent:copyMouseEvent},mousewheel:{copyEvent:copyMouseEvent},wheel:{copyEvent:copyMouseEvent},mouseenter:{copyEvent:copyMouseEvent},mouseleave:{copyEvent:copyMouseEvent},mouseout:{copyEvent:copyMouseEventOverOut},mouseover:{copyEvent:copyMouseEventOverOut},keyup:{copyEvent:copyKeyEvent},keydown:{copyEvent:copyKeyEvent},keypress:{copyEvent:copyKeyEvent},blur:{copyEvent:copyInputEvent},focus:{copyEvent:copyInputEvent},focusin:{copyEvent:copyInputEvent},focusout:{copyEvent:copyInputEvent},copy:{copyEvent:copyInputEvent},cut:{copyEvent:copyInputEvent},change:{copyEvent:copyInputEvent},input:{copyEvent:copyInputEvent},textinput:{copyEvent:copyInputEvent},scroll:{copyEvent:copyNavigateEvent},reset:{copyEvent:copyNavigateEvent},submit:{copyEvent:copyNavigateEvent},select:{copyEvent:copyNavigateEvent},error:{copyEvent:copyNavigateEvent},haschange:{copyEvent:copyNavigateEvent},load:{copyEvent:copyNavigateEvent},unload:{copyEvent:copyNavigateEvent},resize:{copyEvent:copyNavigateEvent},"":{}};_MutableEvent.prototype.relatedTarget=null,_MutableEvent.prototype.withActionInfo=MutableEvent_withActionInfo,_MutableEvent.prototype.withDefaultSubmit=MutableEvent_withDefaultSubmit,_MutableEvent.prototype.stopPropagation=function(){this._original.cancelBubble=!0},essential.declare("MutableEvent",MutableEvent),essential.declare("addEventListeners",addEventListeners),essential.declare("cleanRecursively",cleanRecursively),DialogAction.prototype.activateArea=activateArea;var DialogActionGenerator=essential.set("DialogAction",Generator(DialogAction));essential.declare("fireAction",fireAction);var StatefulField=essential.declare("StatefulField",Generator(_StatefulField));StatefulField.prototype.destroy=function(){},StatefulField.prototype.discard=function(){},StatefulField.variant("input[type=time]",Generator(_TimeField,_StatefulField));var CommandField=StatefulField.variant("*[role=link]",Generator(_CommandField,_StatefulField));StatefulField.variant("*[role=button]",Generator(_CommandField,_StatefulField));var arrayContains=essential("arrayContains");essential.declare("enhanceStatefulFields",enhanceStatefulFields);var DocumentRoles=essential.set("DocumentRoles",Generator(_DocumentRoles));_DocumentRoles.args=[ObjectType({name:"handlers"})],_DocumentRoles.prototype._enhance_descs=function(){var e=ApplicationConfig(),t=!1,n=0;for(var r=0,i;i=this.descs[r];++r)!i.enhanced&&this.handlers.enhance[i.role]&&(i.instance=this.handlers.enhance[i.role].call(this,i.el,i.role,e.getConfig(i.el)),i.enhanced=i.instance===!1?!1:!0,++n),i.enhanced||(t=!0);if(!t&&n>0)for(var r=0,s;s=this._on_event[r];++r){var o=[];for(var u=0,i;i=this.descs[u];++u)(s.role==null||s.role==i.role)&&o.push(i);s.type=="enhanced"&&s.func.call(this,this,o)}},_DocumentRoles.discarded=function(e){var t=ApplicationConfig();for(var n=0,r;r=e.descs[n];++n)r.discarded||(e.handlers.discard[r.role]?e.handlers.discard[r.role].call(e,r.el,r.role,r.instance):_DocumentRoles.default_discard.call(e,r.el,r.role,r.instance),r.discarded=!0,callCleaners(r))},_DocumentRoles.prototype._role_descs=function(e){var t=[];for(var n=0,r;r=e[n];++n){var i=r.getAttribute("role");i&&t.push({role:i,el:r,instance:null,layout:{lastDirectCall:0},enhanced:!1,discarded:!1})}return t},_DocumentRoles.prototype._resize_descs=function(){for(var e=0,t;t=this.descs[e];++e)if(t.enhanced&&this.handlers.layout[t.role]){var n=t.el.offsetWidth,r=t.el.offsetHeight;if(t.layout.width!=n||t.layout.height!=r){t.layout.width=n,t.layout.height=r;var i=(new Date).getTime(),s=this.handlers.layout[t.role].throttle;if(!t.layout.delayed)if(typeof s!="number"||t.layout.lastDirectCall+s<i)this.handlers.layout[t.role].call(this,t.el,t.layout,t.instance),t.layout.lastDirectCall=i;else{var o=i+s-t.layout.lastDirectCall;(function(e){e.layout.delayed=!0,setTimeout(function(){DocumentRoles().handlers.layout[e.role].call(DocumentRoles(),e.el,e.layout,e.instance),e.layout.lastDirectCall=i,e.layout.delayed=!1},o)})(t)}}}},_DocumentRoles.prototype._layout_descs=function(){for(var e=0,t;t=this.descs[e];++e)if(t.enhanced&&this.handlers.layout[t.role]){var n=!1,r=t.el.offsetWidth,i=t.el.offsetHeight;r==0&&i==0&&(t.layout.displayed&&(n=!0),t.layout.displayed=!1);if(t.layout.width!=r||t.layout.height!=i)t.layout.width=r,t.layout.height=i,n=!0;t.layout.area!=_activeAreaName&&(t.layout.area=_activeAreaName,n=!0),n&&this.handlers.layout[t.role].call(this,t.el,t.layout,t.instance)}},_DocumentRoles.prototype._area_changed_descs=function(){for(var e=0,t;t=this.descs[e];++e)t.enhanced&&this.handlers.layout[t.role]&&(t.layout.area=_activeAreaName,this.handlers.layout[t.role].call(this,t.el,t.layout,t.instance))},_DocumentRoles.prototype.on=function(e,t,n){arguments.length==2&&(n=t),this._on_event.push({type:e,func:n,name:e,role:t})},DocumentRoles.presets.declare("handlers.enhance",{}),DocumentRoles.presets.declare("handlers.layout",{}),DocumentRoles.presets.declare("handlers.discard",{}),DocumentRoles.useBuiltins=function(e){DocumentRoles.restrict({singleton:!0,lifecycle:"page"});for(var t=0,n;n=e[t];++t)this["enhance_"+n]&&this.presets.declare(["handlers","enhance",n],this["enhance_"+n]),this["layout_"+n]&&this.presets.declare(["handlers","layout",n],this["layout_"+n]),this["discard_"+n]&&this.presets.declare(["handlers","discard",n],this["discard_"+n])},DocumentRoles.enhance_dialog=_DocumentRoles.enhance_dialog=function(e,t,n){switch(e.tagName.toLowerCase()){case"form":e.onsubmit=form_onsubmit,e.__builtinSubmit=e.submit,e.submit=form_submit,e.__builtinBlur=e.blur,e.blur=form_blur,e.__builtinFocus=e.focus,e.focus=form_focus;break;default:forceNoSubmitType(e.getElementsByTagName("BUTTON")),applyDefaultRole(e.getElementsByTagName("BUTTON")),applyDefaultRole(e.getElementsByTagName("A")),e.submit=dialog_submit}return addEventListeners(e,{click:dialog_button_click},!1),{}},DocumentRoles.layout_dialog=_DocumentRoles.layout_dialog=function(e,t,n){},DocumentRoles.discard_dialog=_DocumentRoles.discard_dialog=function(e,t,n){},DocumentRoles.enhance_toolbar=_DocumentRoles.enhance_toolbar=function(e,t,n){return forceNoSubmitType(e.getElementsByTagName("BUTTON")),applyDefaultRole(e.getElementsByTagName("BUTTON")),applyDefaultRole(e.getElementsByTagName("A")),e.submit=toolbar_submit,addEventListeners(e,{click:dialog_button_click},!1),{}},DocumentRoles.layout_toolbar=_DocumentRoles.layout_toolbar=function(e,t,n){},DocumentRoles.discard_toolbar=_DocumentRoles.discard_toolbar=function(e,t,n){},DocumentRoles.enhance_navigation=_DocumentRoles.enhance_navigation=DocumentRoles.enhance_menu=_DocumentRoles.enhance_menu=DocumentRoles.enhance_menubar=_DocumentRoles.enhance_menubar=DocumentRoles.enhance_toolbar,DocumentRoles.enhance_sheet=_DocumentRoles.enhance_sheet=function(e,t,n){return{}},DocumentRoles.layout_sheet=_DocumentRoles.layout_sheet=function(e,t,n){},DocumentRoles.discard_sheet=_DocumentRoles.discard_sheet=function(e,t,n){},DocumentRoles.enhance_spinner=_DocumentRoles.enhance_spinner=function(e,t,n){var r={lines:8,length:5,width:5,radius:8,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:n.zIndex!=undefined?n.zIndex:2e9,top:"auto",left:"auto"};return(new Spinner(r)).spin(e)},DocumentRoles.layout_spinner=_DocumentRoles.layout_spinner=function(e,t,n){},DocumentRoles.discard_spinner=_DocumentRoles.discard_spinner=function(e,t,n){n.stop(),e.innerHTML=""},DocumentRoles.enhance_application=_DocumentRoles.enhance_application=function(e,t,n){n.variant;if(n.generator){var r=_lookup_generator(n.generator,n.resolver);if(r){var i=r(e,t,n);return i}return!1}return{}},DocumentRoles.layout_application=_DocumentRoles.layout_application=function(e,t,n){},DocumentRoles.discard_application=_DocumentRoles.discard_application=function(e,t,n){},_DocumentRoles.default_enhance=function(e,t,n){return{}},_DocumentRoles.default_layout=function(e,t,n){},_DocumentRoles.default_discard=function(e,t,n){};var LayouterGenerator=essential.declare("Layouter",Generator(Layouter)),stages=[],StageLayouterGenerator=essential.declare("StageLayouter",Generator(StageLayouter));LayouterGenerator.variant("area-stage",StageLayouterGenerator),StageLayouter.prototype.refreshClass=function(e){var t=[];for(var n=0,r;r=this.areaNames[n];++n)r==this.activeArea?t.push(r+"-area-active"):t.push(r+"-area-inactive");var i=this.baseClass+t.join(" ");e.className!=i&&(e.className=i)},StageLayouter.prototype.updateActiveArea=function(e){this.activeArea=e,this.refreshClass(document.getElementById(this.key))};var LaidoutGenerator=essential.declare("Laidout",Generator(Laidout)),MemberLaidoutGenerator=essential.declare("MemberLaidout",Generator(MemberLaidout));LaidoutGenerator.variant("area-member",MemberLaidoutGenerator);var _activeAreaName,_liveAreas=!1;essential.set("activateArea",activateArea),essential.set("getActiveArea",getActiveArea),window.addEventListener?window.addEventListener("load",onPageLoad,!1):window.attachEvent&&window.attachEvent("onload",onPageLoad);var ApplicationConfig=Generator(_ApplicationConfig);essential.set("ApplicationConfig",ApplicationConfig).restrict({singleton:!0,lifecycle:"page"}),ApplicationConfig.presets.declare("state",{}),ApplicationConfig.prototype.onStateChange=function(e){switch(e.symbol){case"livepage":pageResolver.reflectStateOn(document.body,!1);var t=e.data;_activeAreaName?activateArea(_activeAreaName):e.base.authenticated?activateArea(t.getAuthenticatedArea()):activateArea(t.getIntroductionArea());break;case"loadingScripts":case"loadingConfig":--e.inTrigger,this.set("state.loading",e.base.loadingScripts||e.base.loadingConfig),++e.inTrigger;break;case"preloading":if(!e.value)for(var n in e.base.loadingScriptsUrl){var r=e.base.loadingScriptsUrl[n];if(r.rel=="pastload"&&!r.added){var i=!0;r.lang&&(i=r.lang==pageResolver("state.lang")),i&&document.body.appendChild(HTMLScriptElement(r.attrs)),r.added=i}}break;case"loading":e.value==0&&(document.body&&essential("instantiatePageSingletons")(),enhanceUnhandledElements(),e.base.configured==1&&e.base.authenticated==1&&e.base.authorised==1&&e.base.connected==1&&e.base.launched==0&&(this.set("state.launching",!0),document.body&&essential("instantiatePageSingletons")(),enhanceUnhandledElements()));break;case"authenticated":case"authorised":case"configured":e.base.loading==0&&e.base.configured==1&&e.base.authenticated==1&&e.base.authorised==1&&e.base.connected==1&&e.base.launched==0&&(this.set("state.launching",!0),document.body&&essential("instantiatePageSingletons")(),enhanceUnhandledElements());break;case"launching":case"launched":e.value==1&&(document.body&&essential("instantiatePageSingletons")(),enhanceUnhandledElements(),e.symbol=="launched"&&this.set("state.launching",!1));break;case"lang":document.documentElement.lang=e.value;break;default:e.base.loading==0&&e.base.launching==0&&e.base.launched==0&&document.body&&essential("instantiatePageSingletons")()}},ApplicationConfig.prototype.onLoadingScripts=function(e){var t=this("state.loadingScriptsUrl"),n=!1,r=!1;for(var i in t){var s=t[i];s.rel=="preload"&&(r=!0),s&&(n=!0)}this.set("state.loadingScripts",n),this.set("state.preloading",r),e.value==0&&document.body&&essential("instantiatePageSingletons")()},ApplicationConfig.prototype.onLoadingConfig=function(e){var t=this("state.loadingConfigUrl"),n=!1;for(var r in t)t[r]&&(n=!0);this.set("state.loadingConfig",n),e.value==0&&document.body&&essential("instantiatePageSingletons")()},ApplicationConfig.prototype.isPageState=function(e){return this.resolver("state."+e)},ApplicationConfig.prototype.setPageState=function(e,t){this.resolver.set(["state",e],t)},ApplicationConfig.prototype.getAuthenticatedArea=function(){return"sp-explorer"},ApplicationConfig.prototype.getIntroductionArea=function(){return"sp-explorer"},ApplicationConfig.prototype.declare=function(e,t){this.config.declare(e,t)},ApplicationConfig.prototype._apply=function(){for(var e in this.config()){var t=this.config()[e],n=this.getElement(e);t.layouter&&(n.layouter=LayouterGenerator.variant(t.layouter)(e,n,t)),t.laidout&&(n.laidout=LaidoutGenerator.variant(t.laidout)(e,n,t))}};var _singleQuotesRe=new RegExp("'","g");ApplicationConfig.prototype._getElementRoleConfig=function(e){var t=e.getAttribute("data-role");if(t)try{var n=JSON.parse("{"+t.replace(_singleQuotesRe,'"')+"}");return e.id&&(this.config()[e.id]=n),n}catch(r){return console.debug("Invalid config: ",t,r),{"invalid-config":t}}return{}},ApplicationConfig.prototype.getConfig=function(e){if(e.id)return this.config()[e.id]||this._getElementRoleConfig(e);var t=e.getAttribute("name");if(t){var n=e.parentNode;while(n){if(n.id)return this.config()[n.id+"."+t]||this._getElementRoleConfig(e);n=n.parentNode}}return this._getElementRoleConfig(e)},ApplicationConfig.prototype.getElement=function(e){var t=e.split("."),n=document.getElementById(t[0]);return t.length>1&&(n=n.getElementByName(t[1])),n}}(),Resolver("essential")("ApplicationConfig").prototype._gather=function(){var scripts=document.getElementsByTagName("script");for(var i=0,s;s=scripts[i];++i)if(s.getAttribute("type")=="application/config")with(this)eval(s.text)}
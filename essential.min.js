/*
    Essential JavaScript ‚ùÄ http://essentialjs.com
    Copyright (C) 2011 by Henrik Vendelbo

    This program is free software: you can redistribute it and/or modify it under the terms of
    the GNU Affero General Public License version 3 as published by the Free Software Foundation.

    Additionally,

    Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
    and associated documentation files (the "Software"), to deal in the Software without restriction, 
    including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, 
    and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, 
    subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING 
    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, 
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
function Resolver(e,t,n){"use strict";function r(e,r,i){var s=t;for(var o=0,u;o<e.length;++o){u=e[o];var a=s;s=s[u];if(s==undefined){switch(i){case undefined:case"generate":if(s===undefined){s=a[u]=(n.generator||Generator.ObjectGenerator)();continue};case"null":if(s===undefined)return null;break;case"undefined":if(s===undefined)return undefined}if(o<e.length-1)throw new Error("The '"+u+"' part of '"+e.join(".")+"' couldn't be resolved.")}}if(r)for(var f=0,u;u=r[f];++f){var a=s;s=s[u];if(s==undefined){switch(i){case undefined:case"generate":if(s===undefined){s=a[u]=(n.generator||Generator.ObjectGenerator)();continue};case"null":if(s===undefined)return null;break;case"undefined":if(s===undefined)return undefined}if(o<e.length-1)throw new Error("The '"+u+"' part of '"+r.join(".")+"' in '"+e.join(".")+"' couldn't be resolved.")}}return s}function i(e,t,n,r){return n[r]===e?!1:(n[r]=e,typeof e=="object"&&e!==null&&e.__generator__==e&&(e.info.symbol=r,e.info["package"]=t.join("."),e.info.within=n),!0)}function s(){}function o(e,t,n,r,i){function u(t,n,r){if(this.inTrigger)return;++this.inTrigger,this.base=t,this.symbol=n,this.value=r,this.callback.call(e,this),--this.inTrigger}var o={};return o.resolver=e,o.type=t,o.selector=n,o.data=r,o.callback=i,o.inTrigger=0,o.trigger=i?u:s,o}function u(e,t){return typeof e=="object"?e.length!=undefined?r(e,null,t):r(e.name.split("."),null,e.onundefined):r(e.split("."),null,t)}function f(){var e={};for(var t in a)e[t]=[];return e}function l(e,t,n){function d(){if(arguments.length==1){var e=typeof arguments[0]=="object"?arguments[0]:arguments[0].split("."),n=r(s,e,t);return n}var i=r(s,null,t);return i}function v(){if(arguments.length>1){var e=typeof arguments[0]=="object"?arguments[0]:arguments[0].split("."),t=e.pop(),n=r(s,e,p),o=s.concat(e),a=o.join(".");e.push(t),value=!arguments[1];if(i(value,o,n,t)){var f=u.references[a+"."+t];f&&f._callListener("change",o,n,t,value);var d=u.references[a];d&&d._callListener("change",o,n,t,value)}}else{var n=r(h,null,p);if(i(value,h,n,l)){this._callListener("change",h,n,l,value);if(c){var d=u.references[c];d&&d._callListener("change",h,n,l,value)}}}return value}function m(e){if(arguments.length>1){var t=typeof arguments[0]=="object"?arguments[0]:arguments[0].split("."),n=t.pop(),o=r(s,t,p),a=s.concat(t),f=a.join(".");t.push(n),e=arguments[1];if(i(e,a,o,n)){var d=u.references[f+"."+n];d&&d._callListener("change",a,o,n,e);var v=u.references[f];v&&v._callListener("change",a,o,n,e)}}else{var o=r(h,null,p);if(i(e,h,o,l)){this._callListener("change",h,o,l,e);if(c){var v=u.references[c];v&&v._callListener("change",h,o,l,e)}}}return e}function g(e){if(arguments.length>1){var t=typeof arguments[0]=="object"?arguments[0]:arguments[0].split("."),n=t.pop(),o=r(s,t,p),a=s.concat(t),f=a.join(".");t.push(n),e=arguments[1];if(o[n]===undefined&&i(e,a,o,n)){var d=u.references[f+"."+n];d&&d._callListener("change",a,o,n,e);var v=u.references[f];v&&v._callListener("change",a,o,n,e)}return o[n]}var o=r(h,null,p);if(o[l]===undefined&&i(e,h,o,l)){this._callListener("change",h,o,l,e);if(c){var v=u.references[c];v&&v._callListener("change",h,o,l,e)}}return o[l]}function y(e){var n=r(s,null,t);return arguments.length?n[e]:n}function b(e,n){var o=s.pop(),u=r(s,null,t);s.push(o),u[o]===undefined&&i({},s,u,o),u[o][e]===undefined&&(s.push(e),i(n,s,u[o],e)&&this._callListener("change",s,e,n),s.pop())}function w(e,n){var o=s.pop(),u=r(s,null,t);s.push(o),u[o]===undefined&&i({},s,u,o),s.push(e),i(n,s,u[o],e)&&this._callListener("change",s,e,n),s.pop()}function E(e){var n=s.pop(),o=r(s,null,t);s.push(n),o[n]===undefined&&i({},s,o,n);var u=s.length,a={};for(var f in e)s[u]=f,i(e[f],s,o[n],f)&&(a[f]=e[f]);s.pop(),this._callListener("change",s,null,a)}function S(e){var n=r(s,null,t);for(var i in n)e[i]=n[i]}function x(t,n,r){if(!t in a)return;switch(arguments.length){case 2:this._addListener(t,e,null,arguments[1]);break;case 3:this._addListener(t,e,n,r)}}function T(e){var n=r(h,null,t),i=n[l];this._callListener(e,h,n,l,i);var s=u.references[c];s&&s._callListener("change",h,r(h,null),l,i)}function N(e){var t=sessionStorage[this.id];if(t!=undefined){var n;try{n=JSON.parse(t)}catch(r){}e.set(n)}}function C(e){var t;window.localStorage&&(t=localStorage[this.id]);if(t!=undefined){var n;try{n=JSON.parse(t)}catch(r){}e.set(n)}}function k(e){function t(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return undefined}var n=t(this.id);if(n!=undefined){n=decodeURI(n);if(this.options.encoding!="string")try{n=JSON.parse(n)}catch(r){}e._reading_cookie=!0,e.set(n),delete e._reading_cookie}}function L(e){try{sessionStorage[this.id]=JSON.stringify(e())}catch(t){}}function A(e){try{localStorage[this.id]=JSON.stringify(e())}catch(t){}}function O(e){if(e._reading_cookie)return;var t;if(this.options.encoding=="string")t=encodeURI(e());else try{t=JSON.stringify(encodeURI(e()))}catch(n){}var r=this.options.days;if(r){var i=new Date;i.setTime(i.getTime()+r*24*60*60*1e3);var s="; expires="+i.toGMTString()}else var s="";document.cookie=this.id+"="+t+s+"; path=/",this.options.touchURL;if(this.options.touchScript){var o=document.getElementById(this.options.touchScript);if(o){var u=Resolver("essential")("HTMLScriptElement")(o);o.parentNode.replaceChild(u,o)}}}function M(t,n,r){r=r||{};if(/change/.test(t)){this.storechanges==undefined&&(this.storechanges={});var i="resolver."+u.named+"#"+e;r.id&&(i=r.id),r.name&&(i=r.name);switch(n){case"session":this.storechanges.session={call:L,id:i,options:r};break;case"local":this.storechanges.local={call:A,id:i,options:r};break;case"cookie":this.storechanges.cookie={call:O,id:i,options:r}}}if(/^load| load/.test(t)){this.readloads==undefined&&(this.readloads={},Resolver.readloads.push(this));var i="resolver."+u.named+"#"+e;r.id&&(i=r.id),r.name&&(i=r.name);switch(n){case"session":this.readloads.session={call:N,id:i,options:r};break;case"local":this.readloads.local={call:C,id:i,options:r};break;case"cookie":this.readloads.cookie={call:k,id:i,options:r}}}if(/unload/.test(t)){this.storeunloads==undefined&&(this.storeunloads={},Resolver.storeunloads.push(this));var i="resolver."+u.named+"#"+e;r.id&&(i=r.id),r.name&&(i=r.name);switch(n){case"session":this.storeunloads.session={call:L,id:i,options:r||{}};break;case"local":this.storeunloads.local={call:A,id:i,options:r||{}};break;case"cookie":this.storeunloads.cookie={call:O,id:i,options:r||{}}}}}function _(e,t,n,r,i){for(var s=0,o;o=this.listeners[e][s];++s)o.trigger(n,r,i);if(this.storechanges&&e=="change")for(var u in this.storechanges)this.storechanges[u].call(this)}function D(e,t,n,i){var s=o(u,e,t,n,i);if(/^bind | bind | bind$|^bind$/.test(e)){e=e.replace(" bind ","").replace("bind ","").replace(" bind",""),this.listeners[e].push(s);var a=t.split("."),f=a.pop(),l=r(a,null,"undefined");s.trigger(l,f,l==undefined?undefined:l[f])}else this.listeners[e].push(s)}var s=[],l,c="",h=[];e!==""&&e!=null&&(s=e.split("."),l=s.pop(),c=s.join("."),h=s.slice(0),s.push(l));var p=t=="null"||t=="undefined"?"throw":t;return d.set=m,d.toggle=v,d.get=d,d.declare=g,d.mixin=E,d.mixinto=S,d.getEntry=y,d.declareEntry=b,d.setEntry=w,d.on=x,d.trigger=T,d.stored=M,d.listeners=n||f(),d._callListener=_,d._addListener=D,d}function c(e){switch(e){case"function":return e;case"object":var t={};for(var n in e)t[n]=e[n];return t;default:return e}}switch(typeof e){case"undefined":return Resolver["default"];case"string":if(Resolver[e]==undefined){if(t==null&&arguments.length>1)return t;n==undefined&&(n=t,t={}),Resolver[e]=Resolver(t,n),Resolver[e].named=e}return Resolver[e]}n=t||{},t=e,u.get=u,u.named=n.name,n.name&&(Resolver[n.name]=u),u.namespace=arguments[0],u.references={};var a={get:!0,change:!0,"undefined":!0};return u.on=function(e,t,n,r){if(!e in a)return;switch(arguments.length){case 2:break;case 3:typeof arguments[1]=="string"&&this.reference(t).on(e,null,arguments[2]);break;case 4:this.reference(t).on(e,n,r)}},u.declare=function(e,t,n){var s;typeof e=="object"&&e.join?(s=e,e=e.join(".")):s=e.split(".");var o=s.pop(),a=r(s,null,n);if(a[o]===undefined){if(i(t,s,a,o)){var f=u.references[e];f&&f._callListener("change",s,a,o,t);var l=s.join("."),c=u.references[l];c&&c._callListener("change",s,a,o,t)}return t}return a[o]},u.set=function(e,t,n){var s;typeof e=="object"&&e.join?(s=e,e=e.join(".")):s=e.split(".");var o=s.pop(),a=r(s,null,n);if(i(t,s,a,o)){var f=u.references[e];f&&f._callListener("change",s,a,o,t);var l=s.join("."),c=u.references[l];c&&c._callListener("change",s,a,o,t)}return t},u.toggle=function(e,t){var n;typeof e=="object"&&e.join?(n=e,e=e.join(".")):n=e.split(".");var s=n.pop(),o=r(n,null,t),a=!o[s];if(i(a,n,o,s)){var f=u.references[e];f&&f._callListener("change",n,o,s,a);var l=n.join("."),c=u.references[l];c&&c._callListener("change",n,o,s,a)}return a},u.reference=function(e,t){e=e||"",typeof e=="object"&&(t=e.onundefined,e=e.name);var n=t?e+":"+t:e,r=this.references[n];if(r)return r;var i=this.references[e];if(i==undefined){i=this.references[e]=l(e,t);if(n==e)return i}return this.references[n]=l(e,t,i.listeners)},u.proxy=function(e,t,n){t.on("change",n,this,function(t){t.data.set(e,t.value)})},u.override=function(e,t){t=t||{};var n=t.name||this.named;return Resolver[n]=Resolver(e,t),Resolver[n].named=n,Resolver[n]},u.destroy=function(){for(var e in this.references)delete this.references[e]},n.mixinto&&(n.mixinto.get==null&&(n.mixinto.get=u),n.mixinto.declare==null&&(n.mixinto.declare=u.declare),n.mixinto.set==null&&(n.mixinto.set=u.set),n.mixinto.reference==null&&(n.mixinto.reference=u.reference),n.mixinto.override==null&&(n.mixinto.override=u.override),n.mixinto.on==null&&(n.mixinto.on=u.on)),u}function Generator(e,t){function r(e,t,r,i,s,o,u,a,f,c,h,p){var d;if(l.info.existing){var v=l.info.identifier.apply(l.info,arguments);if(v in l.info.existing)return d=l.info.existing[v];d=l.info.existing[v]=new l.type}else d=new l.type;d.__context__={generator:l,info:n,args:[e,t,r,i,s,o,u,a,f,c,h,p]};for(var f=0,m;m=n.constructors[f];++f)m.apply(d,d.__context__.args);return delete d.__context__,d}function i(t,n,r,i,s,o,u,a,f,c,h,p){var d=e.apply(l,arguments);return d}function s(t,r,i,s,o,u,a,f,c,h,p,d){"no strict";var v;if(l.info.existing){var m=l.info.identifier.apply(l.info,arguments);if(m in l.info.existing)return v=l.info.existing[m];v=l.info.existing[m]=n.extendsBuiltin[arguments.length].apply(null,arguments)}else{v=n.extendsBuiltin[arguments.length].apply(null,arguments);for(var g in l.prototype)v[g]=l.prototype[g];e.prototype=n.extendsBuiltin.ctr.prototype}v.__context__={generator:l,info:n,args:[t,r,i,s,o,u,a,f,c,h,p,d]};for(var c=0,y;y=n.constructors[c];++c)n.extendsBuiltin.ctr!==y&&y.apply(v,v.__context__.args);return delete v.__context__,v}function o(){var e=this.__context__.args;for(var t=0,r;r=l.args[t];++t)if(e[t]===undefined){var i=l.args[t].name,s=l.args[t]["default"];i in n.restrictedArgs?e[t]=n.restrictedArgs[i]:s&&(e[t]=s)}}function u(){l.presets.reference("").mixinto(this)}function a(){var e=this.__context__.generator.args;for(var t=0,n;n=e[t];++t)n.preset&&(this[n.preset]=arguments[t])}function f(e,t){return function(n,r,i,s,o,u,a,f,l,c,h,p){switch(t){case 1:return new e(n);case 2:return new e(n,r);case 3:return new e(n,r,i);case 4:return new e(n,r,i,s);case 5:return new e(n,r,i,s,o);case 6:return new e(n,r,i,s,o,u);case 7:return new e(n,r,i,s,o,u,a);case 8:return new e(n,r,i,s,o,u,a,f);case 9:return new e(n,r,i,s,o,u,a,f,l);case 10:return new e(n,r,i,s,o,u,a,f,l,c);case 11:return new e(n,r,i,s,o,u,a,f,l,c,h);case 12:return new e(n,r,i,s,o,u,a,f,l,c,h,p);default:return new e}}}function c(e,t,n,r,i,s){if(t==undefined){if(typeof e=="string"){var o=this.variants[e];if(o&&o.generator)return o.generator}else for(var u=0,a;a=e[u];++u){var o=this.variants[a];if(o&&o.generator)return o.generator}var o=this.variants[""];return o&&o.generator?o.generator:this}var f=t.handlers,l=t.bases,c=Generator(t);return this.variants[e]={func:t,generator:c,handlers:f||{},bases:l||[],additional:[n,r,i,s]},c}function h(){var e=[];e.push("function "),e.push(this.info.package),e.push("."),e.push(this.info.symbol),e.push("(");var t=[];for(var n=0,r;r=this.args[n];++n)t.push(r.name+":"+r.variantName);return e.push(t.join(",")),e.push(")"),e.push(" {"),e.push("<br>  "),e.push("<br>  }"),e.push("<br>  "),e.join("")}function p(e,t){if(e.singleton)this.info.singleton=!0,this.info.lifecycle=e.lifecycle,this.info.existing={},this.info.identifier=function(){return 0},this.info.restricted||(Generator.restricted.push(l),this.info.restricted=!0);else if(e.identifier){var n=typeof e.identifier=="string"?e.identifier:"identifier";this.info.identifier=this.info.constructors[-1][n],this.info.existing={},this.info.restricted||(Generator.restricted.push(l),this.info.restricted=!0)}else e.size!=undefined?this.info.restricted||(Generator.restricted.push(l),this.info.restricted=!0):(this.info.singleton=!1,this.info.existing=null);return this.info.restrictedArgs=t,t&&this.info.constructors.unshift(o),this}if(e.__generator__)return e.__generator__;var n={arguments:{},presets:{},options:t,constructors:[]},l=function(t){function N(){}var o=t.length-1,l=t[o];typeof l=="function"?l={}:--o,n.options=l;var c=e.bases||[];if(o>0){c=[];for(var h=o,p;h>=1&&(p=t[h]);--h){switch(p){case Array:case String:n.extendsBuiltin={ctr:p};for(var d=12;d>=0;--d)n.extendsBuiltin[d]=f(p,d)}c.push(p)}}var v=n.constructors;for(var h=0,m;m=c[h];++h){if(m.bases&&m.info&&m.info.constructors){for(var g=0,y;y=m.bases[g];++g)v.push(m.bases[g]);m=c[h]=m.info.constructors[-1]}v.push(m)}v.push(e),v[-1]=e;var b=r;l.alloc===!1?b=i:n.extendsBuiltin&&(b=s),b.__generator__=b,b.info=n,b.bases=c,b.args=l.args||e.args||[];var w=!1;for(var h=0,E;E=b.args[h];++h)E.no=h,n.arguments[E.name]=E,E.preset&&(w=!0);n.constructors.unshift(u),w&&n.constructors.unshift(a);if(c.length){var S=Generator(c[0]),x=b.prototype=new S.type;for(var h=1,m;m=c[h];++h)for(var T in m.prototype)x[T]=m.prototype[T]}b.type=N,b.type.prototype=b.prototype;for(var T in e.prototype)b.prototype[T]=e.prototype[T];if(l.prototype)for(var T in l.prototype)b.prototype[T]=l.prototype[T];return e.prototype=b.prototype,b}(arguments);return Resolver(l.prototype,{mixinto:l,generator:Generator.ObjectGenerator}),l.presets=Resolver(n.presets),l.variant=c,l.variants={},l.toRepr=h,l.restrict=p,e.__generator__=l,l}Resolver.readloads=[],Resolver.storeunloads=[],Resolver.hasGenerator=function(e){return e.__generator__?!0:typeof e=="function"&&typeof e.type=="function"?!0:!1},Resolver.exists=function(e){return this[e]!=undefined},Resolver({},{name:"default"}),Generator.restricted=[],Generator.ObjectGenerator=Generator(Object),!function(e){"use strict";function n(e){this.options=e||{},this.name=this.options.name,this.preset=this.options.preset===!0?this.name:this.options.preset}function r(e){this.type=String,this.variantName="String"}function i(e){this.type=Number,this.variantName="Number"}function s(e){this.type=Date,this.variantName="Date"}function o(e){this.type=Boolean,this.variantName="Boolean"}function u(e){this.type=Object,this.variantName="Object"}function a(e){this.type=Array,this.variantName="Array"}function f(e,t){if(e.indexOf)return e.indexOf(t)>=0;for(var n=0,r;r=e[n];++n)if(r==t)return!0;return!1}function l(){this._set={};for(var e=this.length-1;e>=0;--e){var t=this[e];(this._set[t]||t==="")&&this.splice(e,1),t!=""&&t!=null&&(this._set[t]=!0)}}function c(){}function p(e,t,n,r){var i=2,s=arguments.length-1,o=e,u=t,a=arguments[s],f=document;typeof a=="object"&&a&&"doctype"in a&&s>1&&(f=a,--s),typeof o=="object"&&(u=o,o=u.tagName||"span",--i);if(u&&u.nodeName&&u.attributes&&u.nodeName[0]!="#"){var l={};for(var c=0,h;h=u.attributes[c];++c)l[h.name]=h.value;u=l}var p=f.createElement(o);for(var v in u)switch(v){case"tagName":break;case"class":u[v]!==undefined&&(p.className=u[v]);break;case"style":u[v]!==undefined&&(p.style.cssText=u[v]);break;case"src":u[v]!==undefined&&(p[v]=u[v],/cachebuster=/.test(u[v])&&(p[v]=p[v].replace(/cachebuster=*[0-9]/,"cachebuster="+String((new Date).getTime()))));break;case"id":case"className":case"rel":case"lang":case"language":case"type":u[v]!==undefined&&(p[v]=u[v]);break;case"onload":d(p,u.onload);break;default:p.setAttribute(v,u[v])}var m=[];for(var c=i;c<=s;++c){var g=arguments[c];typeof g=="object"&&"length"in g?m.concat(g):typeof g=="string"&&m.push(arguments[c])}if(m.length){r=document;var y=r._inner_drop;y==undefined&&(y=r._inner_drop=r.createElement("DIV"),r.body.appendChild(y)),y.innerHTML=m.join("");for(var b=y.firstElementChild||y.firstChild;b;b=y.firstElementChild||y.firstChild)p.appendChild(b)}return p}function d(e,t){e.onload=function(e){this.onloadDone||(this.onloadDone=!0,t.call(this,e||event))},e.onreadystatechange=function(e){("loaded"===this.readyState||"complete"===this.readyState)&&!this.onloadDone&&(this.onloadDone=!0,t.call(this,e||event))}}function v(e,t){return p("SCRIPT",e,t)}function g(e,t){return e!==t&&(e.contains?e.contains(t):!0)}function y(e,t){return!!(e.compareDocumentPosition(t)&16)}function b(e,t){return!1}function w(e){this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey,this.metaKey=e.metaKey,this.charCode=e.charCode}function E(e){w.call(this,e)}function S(e){w.call(this,e)}function x(e){this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.pageY=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,this.screenX=e.screenX,this.screenY=e.screenY,this.button=N[e.button],this.buttons=e.button}function T(e){x.call(this,e),this.fromElement=e.fromElement,this.toElement=e.toElement,this.relatedTarget=e.relatedTarget}function k(){var e=this.target;while(e){if(e.getElementById||e.getAttribute==undefined)return this;var t=e.getAttribute("role");switch(t){case"button":case"link":case"menuitem":this.stateful=e.stateful,this.commandRole=t,this.commandElement=e,this.ariaDisabled=e.getAttribute("aria-disabled")!=null,this.commandName=e.getAttribute("data-name")||e.getAttribute("name"),e=null;break;case null:switch(e.tagName){case"BUTTON":case"button":e.type=="submit"&&(this.stateful=e.stateful,this.commandElement=e,this.ariaDisabled=e.getAttribute("aria-disabled")!=null,this.commandName=e.getAttribute("data-name")||e.getAttribute("name"),e=null)}}e&&(e=e.parentNode)}if(this.commandElement==undefined)return this;e=this.commandElement;while(e){var n=e.getAttribute("action");n&&(this.action=n,this.actionElement=e,e=null),e&&(e=e.parentNode)}return this}function L(e){var t="trigger",n=null;if(e.elements){for(var r=0,i;i=e.elements[r];++r)if(i.type=="submit"){t=i.name,n=i;break}}else{var s=e.getElementsByTagName("button");for(var r=0,i;i=s[r];++r)if(i.type=="submit"){t=i.name,n=i;break}var o=e.getElementsByTagName("input");if(n)for(var r=0,i;i=o[r];++r)if(i.type=="submit"){t=i.name,n=i;break}}return this.action=e.action,this.actionElement=e,this.commandElement=n,this.commandName=t,this}function A(e){this._original=e,this.type=e.type,this.target=e.target||e.srcElement,this.currentTarget=e.currentTarget||e.target,C[e.type].copyEvent.call(this,e)}function O(e){function t(){this.withActionInfo=k,this.withDefaultSubmit=L}return e.withActionInfo?e:(t.prototype=e,new t)}function M(e){return e.withActionInfo=k,e.withDefaultSubmit=L,e}function _(e){return e&&e.withActionInfo?e:new A(e==null?window.event:e)}function P(e){var t=e._cleaners,n;if(t!=undefined){do n=t.pop(),n&&n.call(e);while(n);t=undefined}}function H(e){P(e);for(var t=e.firstElementChild||e.firstChild;t;t=t.nextElementSibling||t.nextSibling)P(t),H(t)}function j(e){}function I(e,t){var n=e.uniqueId;n==undefined&&(n=e.uniqueId=++F);var r=B[n];if(r&&!t)return r;var r={role:e.getAttribute("role"),el:e,instance:null,layout:{lastDirectCall:0},refresh:j,enhanced:!1,discarded:!1};return r.uniqueId=n,B[n]=r,r}function q(){for(var e in B){var t=B[e];P(t.el),delete t.el,delete B[e]}}function R(){for(var e in B){var t=B[e],n=m(document.body,t.el);t.enhanced&&(n&&!t.discarded?t.refresh():(P(t.el),delete t.el,delete B[e]))}}function z(){for(var e=0,t;t=Generator.restricted[e];++e)t.info.lifecycle=="page"&&t()}function W(){for(var e=Generator.restricted-1,t;t=Generator.restricted[e];--e){var n=t.info.constructors[-1].discarded;for(var r in t.info.existing){var i=t.info.existing[r];n&&n.call(t,i)}t.info.constructors[-1].__generator__=undefined,t.__generator__=undefined}}function V(){if(X)return;X=!0;for(var e=0,n;n=Resolver.readloads[e];++e)for(var r in n.readloads)n.readloads[r].call(n);try{t("_queueDelayedAssets")(),t.set("_queueDelayedAssets",function(){}),z()}catch(i){console.error("Failed to launch delayed assets and singletons",i)}}function $(){}function J(){for(var e=0,t;t=Resolver.storeunloads[e];++e)for(var n in t.storeunloads)t.storeunloads[n].call(t);W(),clearInterval(U),q();for(var n in Resolver)typeof Resolver[n].destroy=="function"&&Resolver[n].destroy()}function K(){try{e.document.documentElement.doScroll("left")}catch(t){setTimeout(K,1);return}V()}function Q(){if(e.document.addEventListener){var t=function(){e.document.removeEventListener("DOMContentLoaded",t,!1),V()};e.document.addEventListener("DOMContentLoaded",t,!1),e.addEventListener("load",V,!1)}else if(e.document.attachEvent){var n=function(){e.document.readyState==="complete"&&(e.document.detachEvent("onreadystatechange",n),V())};e.document.attachEvent("onreadystatechange",n),e.attachEvent("onload",V);var r=!1;try{r=e.frameElement==null}catch(i){}e.document.documentElement.doScroll&&r&&K()}}function Y(){function e(e,t){}G.log=function(){e("none",arguments)},G.trace=function(){e("trace",arguments)},G.debug=function(){e("debug",arguments)},G.info=function(){e("info",arguments)},G.warn=function(){e("warn",arguments)},G.error=function(){e("error",arguments)},G.group=function(){e("group",arguments)},G.groupEnd=function(){e("groupEnd",arguments)}}function Z(){G.log=function(){window.console.log.apply(window.console,arguments)},G.trace=function(){window.console.trace()},G.debug=function(){(window.console.debug||window.console.info).apply(window.console,arguments)},G.info=function(){window.console.info.apply(window.console,arguments)},G.warn=function(){window.console.warn.apply(window.console,arguments)},G.error=function(){window.console.error.apply(window.console,arguments)},window.console.debug==undefined&&(G.log=function(e){window.console.log(e)},G.trace=function(e){window.console.trace()},G.debug=function(e){window.console.log(e)},G.info=function(e){window.console.info(e)},G.warn=function(e){window.console.warn(e)},G.error=function(e){window.console.error(e)})}function et(e){return e==null?e:String(e).replace(/&/g,"&amp;").replace(/"/g,"&amp;").replace(/'/g,"&amp;").replace(/</g,"&amp;").replace(/>/g,"&amp;")}function rt(e){var t={},n=e.split("-");return e=="en",n.length==1?t.chain="en":t.chain=n[0],t}function it(e){for(var t=0,n;n=e[t];++t)n=n.toLowerCase().replace("_","-"),this.declare(["locales",n],rt(n))}function st(e,t,n,r){for(var i in n)r&&this.declare(["keys",t,i],r()),this.set(["keys",t,i,e.toLowerCase().replace("_","-")],n[i])}function ot(e,t){var n=null,r=null;typeof e=="object"&&(n=e.phrase,r=e.context||null,e=e.key);var i=tt("locales"),s=tt("locale");s&&(s=s.toLowerCase().replace("_","-"));var o,u,a;if(e){a=tt.get(["keys",r,e],"undefined");while(o==undefined&&a&&s)o=a[s],i[s]?s=i[s].chain:s=null}else if(n){a=tt.get(["phrases",r,n],"undefined");while(o==undefined&&a&&s)o=a[s],i[s]?s=i[s].chain:s=null}if(o){if(t&&a.begin&&a.end)for(var f in t)o=o.replace(a.begin+f+a.end,t[f]);return o}return n}var t=Resolver("essential",{});t.set("Type",Generator(n)),t.set("StringType",Generator(r,n)),t.namespace.Type.variant("String",t.namespace.StringType),t.set("NumberType",Generator(i,n)),t.namespace.Type.variant("Number",t.namespace.NumberType),t.set("DateType",Generator(s,n)),t.namespace.Type.variant("Date",t.namespace.DateType),t.set("BooleanType",Generator(o,n)),t.namespace.Type.variant("Boolean",t.namespace.BooleanType),t.set("ObjectType",Generator(u,n)),t.namespace.Type.variant("Object",t.namespace.ObjectType),t.set("ArrayType",Generator(a,n)),t.namespace.Type.variant("Array",t.namespace.ArrayType),t.declare("arrayContains",f),t.set("ArraySet",Generator(l,Array)),l.prototype.item=function(e){return this[e]},l.prototype.contains=l.prototype.has=function(e){var t=this._set[e];return t===e?!0:typeof t!="object"||!t.multiple_values?!1:f(t,e)},l.prototype.set=function(e,t){typeof e=="object",t?this.add(e):this.remove(e)},l.prototype.add=function(e){var t=this._set[e];if(t===undefined)this._set[e]=e,this.push(e);else{if(t===e)return;if(typeof t!="object"||!t.multiple_values)t=this._set[e]=[t],t.multiple_values=!0;f(t,e)||(t.push(e),this.push(e))}},l.prototype.remove=function(e){var t=this._set[e];if(t===undefined)return;if(t===e){for(var n=this.length-1;n>=0;--n)this[n]===e&&this.splice(n,1);delete this._set[e];return}if(typeof t!="object"||!t.multiple_values)return;for(var n=this.length-1;n>=0;--n)this[n]===e&&this.splice(n,1);for(var n=t.length-1;n>=0;--n)t[n]===e&&t.splice(n,1);t.length==0&&delete this._set[e]},l.prototype.toggle=function(e){this.has(e)?this.remove(e):this.add(e)},l.prototype.separator=" ",l.prototype.toString=function(){return this.join(this.separator)};var h=t.set("DOMTokenList",Generator(c,l,Array));h.prototype.emulateClassList=!0,h.set=function(e,t,n){typeof t=="object",n?e.add(t):e.remove(t)},h.mixin=function(e,t){if(t.split){var n=t.split(" ");for(var r=0,i;i=n[r];++r)e.add(i);return}if(t.length){for(var r=0,i;i=t[r];++r)e.add(i);return}for(var s in t)e.set(s,t[s])},h.eitherClass=function(e,t,n,r){var i=e.classList,s=r?n:t,o=r?t:n;s&&i.remove(s),o&&i.add(o),i.emulateClassList&&(e.className=e.classList.join(e.classList.separator))},t.set("HTMLElement",p),t.set("HTMLScriptElement",v);var m;document.documentElement.contains?m=g:document.documentElement.compareDocumentPosition?m=y:m=b,t.declare("contains",m);var N={1:0,2:2,4:1},C={click:{copyEvent:x},dblclick:{copyEvent:x},contextmenu:{copyEvent:x},mousemove:{copyEvent:x},mouseup:{copyEvent:x},mousedown:{copyEvent:x},mousewheel:{copyEvent:x},wheel:{copyEvent:x},mouseenter:{copyEvent:x},mouseleave:{copyEvent:x},mouseout:{copyEvent:T},mouseover:{copyEvent:T},keyup:{copyEvent:w},keydown:{copyEvent:w},keypress:{copyEvent:w},blur:{copyEvent:E},focus:{copyEvent:E},focusin:{copyEvent:E},focusout:{copyEvent:E},copy:{copyEvent:E},cut:{copyEvent:E},change:{copyEvent:E},input:{copyEvent:E},textinput:{copyEvent:E},scroll:{copyEvent:S},reset:{copyEvent:S},submit:{copyEvent:S},select:{copyEvent:S},error:{copyEvent:S},haschange:{copyEvent:S},load:{copyEvent:S},unload:{copyEvent:S},resize:{copyEvent:S},"":{}};A.prototype.relatedTarget=null,A.prototype.withActionInfo=k,A.prototype.withDefaultSubmit=L,A.prototype.stopPropagation=function(){this._original.cancelBubble=!0},A.prototype.preventDefault=function(){this.defaultPrevented=!0},A.prototype.CAPTURING_PHASE=1,A.prototype.AT_TARGET=2,A.prototype.BUBBLING_PHASE=3;var D;navigator.userAgent.match(/Firefox\//)?D=t.declare("MutableEvent",M):navigator.userAgent.match(/MSIE /)&&!navigator.userAgent.match(/Opera/)?D=t.declare("MutableEvent",_):D=t.declare("MutableEvent",O),t.declare("callCleaners",P),t.declare("cleanRecursively",H);var B=t.declare("enhancedElements",{}),F=555;I.all=B,t.declare("EnhancedDescriptor",I);var U=setInterval(R,330);t.set("instantiatePageSingletons",z),t.set("_queueDelayedAssets",function(){});var X=!1;window.device||(Q(),e.addEventListener?e.addEventListener("load",$,!1):e.attachEvent("onload",$),e.addEventListener?e.addEventListener("unload",J,!1):e.attachEvent("onunload",J));var G=t.declare("console",{});t.declare("setStubConsole",Y),t.declare("setWindowConsole",Z),window.console?Z():Y(),t.declare("htmlEscape",et);var tt=Resolver("translations",{}),nt=window.navigator.userLanguage||window.navigator.language||"en";tt.declare("defaultLocale",nt),tt.declare("locale",nt),tt.on("change","locale",function(e){var t=e.value.split("-");t.length==1&&(t=e.value.split("_")),Resolver.exists("page")&&Resolver("page").set("state.lang",t[0])}),tt.declare("locales",{}),tt.declare("keys",{}),tt.declare("phrases",{}),tt.setLocales=it,tt.setKeysForLocale=st,tt.translate=ot,tt._=ot,t.set("translate",ot)}(window),!function(){function a(e,t,n){}function l(e,t,n){}function p(e,t){t.disabled=e.disabled||!1,t.readOnly=e.readOnly||!1,t.hidden=e.getAttribute("hidden")!=null,t.required=e.getAttribute("required")!=null}function d(e,t,n){e[t]=!!n}function v(e,t,n){if(typeof e[t]=="boolean"){e[t]=!!n;return}n?e.setAttribute(t,t):e.removeAttribute(t)}function m(e,t,n){n?e.setAttribute("aria-"+t,t):e.removeAttribute("aria-"+t)}function g(e,t,n){typeof e[t]=="boolean"?e[t]=!!n:n?e.setAttribute(t,t):e.removeAttribute(t),n?e.setAttribute("aria-"+t,t):e.removeAttribute("aria-"+t)}function y(e,t,n){e[this.property]=n}function S(e){var t=e.data,n=b[e.symbol];n&&n.reflect(t,e.symbol,e.value);var r=t.stateful("map.class","undefined");r&&w(t,r.state[e.symbol],r.notstate[e.symbol],e.value)}function x(e){var t=[];t[0]=state.disabled?"state-disabled":""}function T(){}function N(){}function C(e){return function(){var t=r({target:e}).withActionInfo();fireAction(t)}}function k(e){return this.field=e,e}function L(e,t){var r=e.stateful=this;e._cleaners==undefined&&(e._cleaners=[]),i(e._cleaners,A)||e._cleaners.push(A),t!=0&&p(e,r("state")),r.on("change","state",e,S),h||(e.classList=n(),E(e.classList,e.className));var s=e.stateful("map.class","undefined");s&&O.updateClass(r,e)}function A(){this.stateful&&(this.stateful.field&&(this.stateful.field.destroy(),this.stateful.field.discard()),this.stateful.field=undefined,this.stateful.destroy(),this.stateful.fireAction=undefined,this.stateful.setField=undefined,this.stateful=undefined)}function O(e,t){if(e&&e.stateful)return e.stateful;var n={};typeof t=="object"&&(n=t,t=t.mapClassForState);var r=Resolver({state:{}},n);return t&&(r.set("map.class.state",new T),r.set("map.class.notstate",new N)),r.fireAction=C(e),r.setField=k,r.reflectStateOn=L,e&&r.reflectStateOn(e),r}function H(t){if(!D){_=t;return}for(var n=0,r;r=P[n];++n)r.updateActiveArea(t);_=t;if(document.body){var i=e("DocumentRoles")();i._layout_descs()}}function B(){return _}function j(){var e=q();D=!0,e.state.set("livepage",!0)}function F(e){var t=q();D=!0,t.state.set("livepage",!0)}function I(){this.resolver=M;var e=this.resolver.reference("state","undefined");for(var t in this.state)e.set(t,this.state[t]);this.state=e,document.documentElement.lang=this.state("lang"),e.on("change",this,this.onStateChange),this.resolver.on("change","state.loadingScriptsUrl",this,this.onLoadingScripts),this.resolver.on("change","state.loadingConfigUrl",this,this.onLoadingConfig),this.config=this.resolver.reference("config","undefined"),this._gather(),this._apply(),setTimeout(j,60)}function R(){var t=q(),n=e("DocumentRoles")();n._enhance_descs(u)}var e=Resolver("essential",{}),t=e("console"),n=e("DOMTokenList"),r=e("MutableEvent"),i=e("arrayContains"),s=e("HTMLElement"),o=e("HTMLScriptElement"),u=e("enhancedElements"),f=e.declare("Layouter",Generator(a)),c=e.declare("Laidout",Generator(l)),h=!!document.documentElement.classList,b={disabled:{index:0,reflect:m,property:"ariaDisabled"},readOnly:{index:1,reflect:d},hidden:{index:2,reflect:v},required:{index:3,reflect:g,property:"ariaRequired"},expanded:{index:4,reflect:g,property:"ariaExpanded"}},w=e("DOMTokenList.eitherClass"),E=e("DOMTokenList.mixin");T.prototype.disabled="state-disabled",T.prototype.readOnly="state-readOnly",T.prototype.hidden="state-hidden",T.prototype.required="state-required",T.prototype.expanded="state-expanded",N.prototype.disabled="",N.prototype.readOnly="",N.prototype.hidden="",N.prototype.required="",N.prototype.expanded="",e.declare("statefulCleaner",A),e.declare("StatefulResolver",O);var M=O(null,{name:"page",mapClassForState:!0});M.declare("config",{}),M.reference("state").mixin({livepage:!1,authenticated:!0,authorised:!0,connected:!0,online:!0,preloading:!1,loading:!0,loadingConfig:!1,loadingScripts:!1,configured:!0,fullscreen:!1,launching:!1,launched:!1,lang:document.documentElement.lang||"en",loadingScriptsUrl:{},loadingConfigUrl:{}}),M.reference("connection").mixin({loadingProgress:"",status:"connected",detail:"",userName:"",logStatus:!1}),M.reference("map.class.state").mixin({authenticated:"authenticated",loading:"loading",launched:"launched",launching:"launching",livepage:"livepage"}),M.reference("map.class.notstate").mixin({authenticated:"login"}),O.updateClass=function(e,t){var n={};for(var r in b)n[r]=!0;for(var r in e("map.class.state"))n[r]=!0;for(var r in e("map.class.notstate"))n[r]=!0;for(var r in n)e.reference("state."+r,"null").trigger("change")};var _,D=!1,P=[];e.set("stages",P),e.set("activateArea",H),e.set("getActiveArea",B),window.addEventListener?window.addEventListener("load",F,!1):window.attachEvent&&window.attachEvent("onload",F);var q=Generator(I);e.set("ApplicationConfig",q).restrict({singleton:!0,lifecycle:"page"}),q.presets.declare("state",{}),q.prototype.onStateChange=function(t){switch(t.symbol){case"livepage":M.reflectStateOn(document.body,!1);var n=t.data;if(_)H(_);else for(var r=0,i;i=P[r];++r)t.base.authenticated?H(i.getAuthenticatedArea()):H(i.getIntroductionArea());break;case"loadingScripts":case"loadingConfig":--t.inTrigger,this.set("state.loading",t.base.loadingScripts||t.base.loadingConfig),++t.inTrigger;break;case"preloading":if(!t.value)for(var s in t.base.loadingScriptsUrl){var u=t.base.loadingScriptsUrl[s];if(u.rel=="pastload"&&!u.added){var a=!0;u.lang&&(a=u.lang==M("state.lang")),a&&document.body.appendChild(o(u.attrs)),u.added=a}}break;case"loading":t.value==0&&(document.body&&e("instantiatePageSingletons")(),R(),t.base.configured==1&&t.base.authenticated==1&&t.base.authorised==1&&t.base.connected==1&&t.base.launched==0&&(this.set("state.launching",!0),document.body&&e("instantiatePageSingletons")(),R()));break;case"authenticated":for(var r=0,i;i=P[r];++r)H(t.base.authenticated?i.getAuthenticatedArea():i.getIntroductionArea());case"authorised":case"configured":t.base.loading==0&&t.base.configured==1&&t.base.authenticated==1&&t.base.authorised==1&&t.base.connected==1&&t.base.launched==0&&(this.set("state.launching",!0),document.body&&e("instantiatePageSingletons")(),R());break;case"launching":case"launched":t.value==1&&(document.body&&e("instantiatePageSingletons")(),R(),t.symbol=="launched"&&this.set("state.launching",!1));break;case"lang":document.documentElement.lang=t.value;break;default:t.base.loading==0&&t.base.launching==0&&t.base.launched==0&&document.body&&e("instantiatePageSingletons")()}},q.prototype.onLoadingScripts=function(t){var n=this("state.loadingScriptsUrl"),r=!1,i=!1;for(var s in n){var o=n[s];o.rel=="preload"&&(i=!0),o&&(r=!0)}this.set("state.loadingScripts",r),this.set("state.preloading",i),t.value==0&&document.body&&e("instantiatePageSingletons")()},q.prototype.onLoadingConfig=function(t){var n=this("state.loadingConfigUrl"),r=!1;for(var i in n)n[i]&&(r=!0);this.set("state.loadingConfig",r),t.value==0&&document.body&&e("instantiatePageSingletons")()},q.prototype.isPageState=function(e){return this.resolver("state."+e)},q.prototype.setPageState=function(e,t){this.resolver.set(["state",e],t)},q.prototype.declare=function(e,t){this.config.declare(e,t)},q.prototype._apply=function(){for(var e in this.config()){var t=this.getElement(e),n=t?this._getElementRoleConfig(t,e):this.config()[e];n.layouter&&(t.layouter=f.variant(n.layouter)(e,t,n)),n.laidout&&(t.laidout=c.variant(n.laidout)(e,t,n))}};var U=new RegExp("'","g");q.prototype._getElementRoleConfig=function(e,n){var r={};if(n){var i=this.config(n);if(i)for(var s in i)r[s]=i[s]}var o=e.getAttribute("data-role");if(o)try{var u=JSON.parse("{"+o.replace(U,'"')+"}");for(var s in u)r[s]=u[s]}catch(a){t.debug("Invalid config: ",o,a),r["invalid-config"]=o}return r},q.prototype.getConfig=function(e){if(e.id)return this._getElementRoleConfig(e,e.id);var t=e.getAttribute("name");if(t){var n=e.parentNode;while(n){if(n.id)return this._getElementRoleConfig(e,n.id+"."+t);n=n.parentNode}}return this._getElementRoleConfig(e)},q.prototype.getElement=function(e){var t=e.split("."),n=document.getElementById(t[0]);return t.length>1&&(n=n.getElementByName(t[1])),n}}(),Resolver("essential")("ApplicationConfig").prototype._gather=function(){var scripts=document.getElementsByTagName("script");for(var i=0,s;s=scripts[i];++i)if(s.getAttribute("type")=="application/config")with(this)eval(s.text)},!function(){function i(){this._object=e&&!r?new e:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function s(){return new i}function o(e){e._object.send(e._data);if(t&&!e._async){e.readyState=s.OPENED,f(e);while(e.readyState<s.DONE){e.readyState++,u(e);if(e._aborted)return}}}function u(e){s.onreadystatechange&&s.onreadystatechange.apply(e),e.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function a(e){var t=e.responseXML,r=e.responseText;n&&r&&t&&!t.documentElement&&e.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.validateOnParse=!1,t.loadXML(r));if(t)if(n&&t.parseError!==0||!t.documentElement||t.documentElement&&t.documentElement.tagName=="parsererror")return null;return t}function f(e){try{e.responseText=e._object.responseText}catch(t){}try{e.responseXML=a(e._object)}catch(t){}try{e.status=e._object.status}catch(t){}try{e.statusText=e._object.statusText}catch(t){}}function l(e){e._object.onreadystatechange=new window.Function}var e=window.XMLHttpRequest,t=!!window.controllers,n=window.document.all&&!window.opera,r=n&&window.navigator.userAgent.match(/MSIE 7.0/);s.prototype=i.prototype,t&&e.wrapped&&(s.wrapped=e.wrapped),s.UNSENT=0,s.OPENED=1,s.HEADERS_RECEIVED=2,s.LOADING=3,s.DONE=4,s.prototype.readyState=s.UNSENT,s.prototype.responseText="",s.prototype.responseXML=null,s.prototype.status=0,s.prototype.statusText="",s.prototype.priority="NORMAL",s.prototype.onreadystatechange=null,s.onreadystatechange=null,s.onopen=null,s.onsend=null,s.onabort=null,s.prototype.open=function(e,r,i,o,a){delete this._headers,arguments.length<3&&(i=!0),this._async=i;var c=this,h=this.readyState,p=null;n&&i&&(p=function(){h!=s.DONE&&(l(c),c.abort())},window.attachEvent("onunload",p)),s.onopen&&s.onopen.apply(this,arguments),arguments.length>4?this._object.open(e,r,i,o,a):arguments.length>3?this._object.open(e,r,i,o):this._object.open(e,r,i),this.readyState=s.OPENED,u(this),this._object.onreadystatechange=function(){if(t&&!i)return;c.readyState=c._object.readyState,f(c);if(c._aborted){c.readyState=s.UNSENT;return}c.readyState==s.DONE&&(delete c._data,l(c),n&&i&&window.detachEvent("onunload",p),h!=c.readyState&&u(c),h=c.readyState)}},s.prototype.send=function(e){s.onsend&&s.onsend.apply(this,arguments),arguments.length||(e=null),e&&e.nodeType&&(e=window.XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=e,o(this)},s.prototype.sendEncoded=function(e){s.onsend&&s.onsend.apply(this,arguments),arguments.length||(e=null);if(e&&typeof e=="object"){var t=this._headers["Content-Type"];t||(this._object.setRequestHeader("Content-Type","text/json"),t="text/json");switch(t){case"text/json":e=JSON.stringify(e);break;case"application/x-www-form-urlencoded":var n=[];for(var r in e)n.push(r+"="+encodeURIComponent(e[r]));e=n.join("&")}}this._data=e,o(this)},s.prototype.abort=function(){s.onabort&&s.onabort.apply(this,arguments),this.readyState>s.UNSENT&&(this._aborted=!0),this._object.abort(),l(this),this.readyState=s.UNSENT,delete this._data},s.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},s.prototype.getResponseHeader=function(e){return this._object.getResponseHeader(e)},s.prototype.setRequestHeader=function(e,t){return this._headers||(this._headers={}),this._headers[e]=t,this._object.setRequestHeader(e,t)},s.prototype.addEventListener=function(e,t,n){for(var r=0,i;i=this._listeners[r];r++)if(i[0]==e&&i[1]==t&&i[2]==n)return;this._listeners.push([e,t,n])},s.prototype.removeEventListener=function(e,t,n){for(var r=0,i;i=this._listeners[r];r++)if(i[0]==e&&i[1]==t&&i[2]==n)break;i&&this._listeners.splice(r,1)},s.prototype.dispatchEvent=function(e){var t={type:e.type,target:this,currentTarget:this,eventPhase:2,bubbles:e.bubbles,cancelable:e.cancelable,timeStamp:e.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}};t.type=="readystatechange"&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[t]);for(var n=0,r;r=this._listeners[n];n++)r[0]==t.type&&!r[2]&&(r[1].handleEvent||r[1]).apply(this,[t])},s.prototype.toString=function(){return"[object XMLHttpRequest]"},s.toString=function(){return"[XMLHttpRequest]"},Resolver("essential").set("XMLHttpRequest",s)}(),!function(){"use strict";function getScrollOffsets(e){var t=0,n=0;while(e&&!isNaN(e.scrollTop))n+=e.scrollTop,t+=e.scrollLeft,e=e.parentNode;return{left:t,top:n}}function getPageOffsets(e){var t=getScrollOffsets(e),n=0,r=0;while(e)r+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return{left:n-t.left,top:r-t.top}}function delayedScriptOnload(e){function t(e){var t=this;setTimeout(function(){var e=pageResolver(["state","loadingScriptsUrl"]);e[t.src.replace(baseUrl,"")]!=undefined?pageResolver.set(["state","loadingScriptsUrl",t.src.replace(baseUrl,"")],!1):e[t.src.replace(serverUrl,"")]!=undefined&&pageResolver.set(["state","loadingScriptsUrl",t.src.replace(serverUrl,"")],!1)},0)}return t}function _queueDelayedAssets(){ApplicationConfig();var links=document.getElementsByTagName("link");for(var i=0,l;l=links[i];++i)if(l.rel=="pastload"||l.rel=="preload"){var attrsStr=l.getAttribute("attrs"),attrs={};attrsStr&&eval("attrs = {"+attrsStr+"}"),attrs.type=l.getAttribute("type")||"text/javascript",attrs.src=l.getAttribute("src"),attrs.onload=delayedScriptOnload(l.rel);var relSrc=attrs.src.replace(baseUrl,"");if(l.rel=="preload"){var langOk=!0;l.lang&&(langOk=l.lang==pageResolver("state.lang")),langOk&&(pageResolver.set(["state","preloading"],!0),pageResolver.set(["state","loadingScripts"],!0),pageResolver.set(["state","loadingScriptsUrl",relSrc],l),document.body.appendChild(HTMLScriptElement(attrs)),l.added=!0)}else{var langOk=!0;l.lang&&(langOk=l.lang==pageResolver("state.lang")),langOk&&(pageResolver.set(["state","loadingScripts"],!0),pageResolver.set(["state","loadingScriptsUrl",relSrc],l),l.attrs=attrs)}}if(!pageResolver(["state","preloading"])){var scripts=pageResolver(["state","loadingScriptsUrl"]);for(var n in scripts){var link=scripts[n];if(link.rel=="pastload"){var langOk=!0;link.lang&&(langOk=link.lang==pageResolver("state.lang")),langOk&&(document.body.appendChild(HTMLScriptElement(link.attrs)),link.added=!0)}}}pageResolver(["state","loadingScripts"])&&console.debug("loading phased scripts");var metas=document.getElementsByTagName("meta");for(var i=0,m;m=metas[i];++i)switch((m.getAttribute("name")||"").toLowerCase()){case"enhanced roles":DocumentRoles.useBuiltins((m.getAttribute("content")||"").split(" "))}}function configRequired(e){pageResolver.set(["state","loadingConfig"],!0),pageResolver.set(["state","loadingConfigUrl",e],!0)}function configLoaded(e){pageResolver.set(["state","loadingConfigUrl",e],!1)}function _makeEventCleaner(e,t,n){function r(){if(this.removeEventListener)for(var t in e)this.removeEventListener(t,e[t],n),delete e[t];else for(var t in e)this.detachEvent("on"+t,e[t]),delete e[t]}return r.listeners=t,r}function addEventListeners(e,t,n){function r(e,t){var n=typeof t=="object",r=n?t:e,i=n?t.handleEvent:t;return function(){return i.call(e,MutableEvent(window.event))}}e._cleaners==undefined&&(e._cleaners=[]);var i={};if(e.addEventListener)for(var s in t)i[s]=t[s],e.addEventListener(s,t[s],n||!1);else for(var s in t)i[s]=r(e,t[s]),e.attachEvent("on"+s,i[s]);e._cleaners.push(_makeEventCleaner(i,t,n||!1))}function removeEventListeners(e,t,n){if(e._cleaners)for(var r=0,i;i=e._cleaners[r];++r)i.listeners==t&&(i.call(e),e._cleaners.splice(r,1));else if(e.removeEventListener)for(var s in t)e.removeEventListener(s,t[s],n||!1);else for(var s in t)e.detachEvent("on"+s,t[s])}function _DialogAction(e){this.actionName=e}function resizeTriggersReflow(e){DocumentRoles()._resize_descs()}function defaultButtonClick(e){e=MutableEvent(e).withActionInfo(),e.commandElement&&e.comandElement==e.actionElement&&fireAction(e)}function fireAction(e){var t=e.actionElement,n=e.action,r=e.commandName;t.actionVariant||(n?n=n.replace(baseUrl,""):n="submit",t.actionVariant=DialogAction.variant(n)(n));if(t.actionVariant[r])t.actionVariant[r](t);else{var i=r.replace("-","_").replace(" ","_");t.actionVariant[i]&&t.actionVariant[i](t)}}function _StatefulField(e,t){}function _TimeField(){}function _CommandField(e,t,n){}function enhanceStatefulFields(e){for(var t=e.firstChild;t;t=t.nextSibling){var n=t.name||t.getAttribute("data-name")||t.getAttribute("name");if(n){var r=t.getAttribute("role"),i=[];r?(t.type&&i.push("*[role="+r+",type="+t.type+"]"),i.push("*[role="+r+"]")):(t.type&&i.push(t.tagName.toLowerCase()+"[type="+t.type+"]"),i.push(t.tagName.toLowerCase()));var s=StatefulResolver(t,!0),o=s.setField(StatefulField.variant(i)(n,s,r));t._cleaners==undefined&&(t._cleaners=[]),arrayContains(t._cleaners,statefulCleaner)||t._cleaners.push(statefulCleaner)}enhanceStatefulFields(t)}}function _DocumentRoles(e,t){this.handlers=e||this.handlers||{enhance:{},discard:{},layout:{}},this._on_event=[],t=t||document;var n=ApplicationConfig();window.addEventListener?(window.addEventListener("resize",resizeTriggersReflow,!1),t.body.addEventListener("orientationchange",resizeTriggersReflow,!1),t.body.addEventListener("click",defaultButtonClick,!1)):(window.attachEvent("onresize",resizeTriggersReflow),t.body.attachEvent("onclick",defaultButtonClick)),this.enhanceBranch(t)}function refreshRoleLayoutCallback(e,t){return function(){var n=!1,r=this.el.offsetWidth,i=this.el.offsetHeight,s=this.el.scrollWidth,o=this.el.scrollHeight;r==0&&i==0&&(this.layout.displayed&&(n=!0),this.layout.displayed=!1);if(this.layout.width!=r||this.layout.height!=i)this.layout.width=r,this.layout.height=i,n=!0;if(this.layout.contentWidth!=s||this.layout.contentHeight!=o)this.layout.contentWidth=s,this.layout.contentHeight=o,n=!0;this.layout.area!=getActiveArea()&&(this.layout.area=getActiveArea(),n=!0),n&&t.call(e,this.el,this.layout,this.instance)}}function scrollbarSize(){if(_scrollbarSize===undefined){var e=HTMLElement("div",{style:"width:50px;height:50px;overflow:scroll;position:absolute;top:-200px;left:-200px;"},'<div style="height:100px;"></div>');document.body.appendChild(e),_scrollbarSize=e.offsetWidth-e.clientWidth||7,document.body.removeChild(e)}return _scrollbarSize}function _StageLayouter(e,t,n){this.key=e,this.type=n.layouter,this.areaNames=n["area-names"],this.activeArea=null,this.introductionArea=n["introduction-area"]||"introduction",this.authenticatedArea=n["authenticated-area"]||"authenticated",this.baseClass=n["base-class"],this.baseClass?this.baseClass+=" ":this.baseClass="",essential("stages").push(this)}function _MemberLaidout(e,t,n){this.key=e,this.type=n.laidout,this.areaNames=n["area-names"],this.baseClass=n["base-class"],this.baseClass?this.baseClass+=" ":this.baseClass="",t.className=this.baseClass+t.className}var essential=Resolver("essential",{}),ObjectType=essential("ObjectType"),console=essential("console"),MutableEvent=essential("MutableEvent"),StatefulResolver=essential("StatefulResolver"),ApplicationConfig=essential("ApplicationConfig"),pageResolver=Resolver("page"),getActiveArea=essential("getActiveArea"),arrayContains=essential("arrayContains"),statefulCleaner=essential("statefulCleaner"),HTMLElement=essential("HTMLElement"),HTMLScriptElement=essential("HTMLScriptElement"),Layouter=essential("Layouter"),Laidout=essential("Laidout"),baseUrl=location.href.substring(0,location.href.split("?")[0].lastIndexOf("/")+1),serverUrl=location.protocol+"//"+location.host,callCleaners=essential("callCleaners"),enhancedElements=essential("enhancedElements"),EnhancedDescriptor=essential("EnhancedDescriptor");essential.set("_queueDelayedAssets",_queueDelayedAssets),essential.set("configRequired",configRequired),essential.set("configLoaded",configLoaded),essential.declare("addEventListeners",addEventListeners),essential.declare("removeEventListeners",removeEventListeners),_DialogAction.prototype.activateArea=essential("activateArea");var DialogAction=essential.set("DialogAction",Generator(_DialogAction));essential.declare("fireAction",fireAction);var StatefulField=essential.declare("StatefulField",Generator(_StatefulField));StatefulField.prototype.destroy=function(){},StatefulField.prototype.discard=function(){},StatefulField.variant("input[type=time]",Generator(_TimeField,_StatefulField));var CommandField=StatefulField.variant("*[role=link]",Generator(_CommandField,_StatefulField));StatefulField.variant("*[role=button]",Generator(_CommandField,_StatefulField)),essential.declare("enhanceStatefulFields",enhanceStatefulFields);var DocumentRoles=essential.set("DocumentRoles",Generator(_DocumentRoles));_DocumentRoles.args=[ObjectType({name:"handlers"})],_DocumentRoles.prototype.enhanceBranch=function(e){var t;e.querySelectorAll?t=this._role_descs(e.querySelectorAll("*[role]")):t=this._role_descs(e.getElementsByTagName("*")),this._enhance_descs(t)},_DocumentRoles.prototype.discardBranch=function(e){},_DocumentRoles.prototype._enhance_descs=function(e){var t=ApplicationConfig(),n=!1,r=0;for(var i in e){var s=e[i];StatefulResolver(s.el,!0);if(!s.enhanced&&this.handlers.enhance[s.role]){s.instance=this.handlers.enhance[s.role].call(this,s.el,s.role,t.getConfig(s.el)),s.enhanced=s.instance===!1?!1:!0,++r;var o=this.handlers.layout[s.role];o&&(s.refresh=refreshRoleLayoutCallback(this,o))}s.enhanced||(n=!0)}if(!n&&r>0)for(var u=0,a;a=this._on_event[u];++u)if(a.type=="enhanced"){var f=[];for(var i in e){var s=e[i];(a.role==null||a.role==s.role)&&f.push(s)}a.func.call(this,this,f)}},_DocumentRoles.discarded=function(e){for(var t in enhancedElements){var n=enhancedElements[t];n.role&&n.enhanced&&!n.discarded&&(callCleaners(n.el),delete n.el,delete enhancedElements[t])}},_DocumentRoles.prototype._roleEnhancedCleaner=function(e){var t=this,n=this.handlers.discard[e.role]||_DocumentRoles.default_discard;return function(){return n.call(t,e.el,e.role,e.instance)}},_DocumentRoles.prototype._role_descs=function(e){var t=[];for(var n=0,r;r=e[n];++n){var i=r.getAttribute("role");if(r.getAttribute("role")){var s=EnhancedDescriptor(r,!0);t.push(s),r._cleaners==undefined&&(r._cleaners=[]),arrayContains(r._cleaners,statefulCleaner)||r._cleaners.push(this._roleEnhancedCleaner(s))}}return t},_DocumentRoles.prototype._resize_descs=function(){for(var e in enhancedElements){var t=enhancedElements[e];if(t.enhanced&&this.handlers.layout[t.role]){var n=t.el.offsetWidth,r=t.el.offsetHeight;if(t.layout.width!=n||t.layout.height!=r){t.layout.width=n,t.layout.height=r;var i=(new Date).getTime(),s=this.handlers.layout[t.role].throttle;if(!t.layout.delayed)if(typeof s!="number"||t.layout.lastDirectCall+s<i)this.handlers.layout[t.role].call(this,t.el,t.layout,t.instance),t.layout.lastDirectCall=i;else{var o=i+s-t.layout.lastDirectCall;(function(e){e.layout.delayed=!0,setTimeout(function(){DocumentRoles().handlers.layout[e.role].call(DocumentRoles(),e.el,e.layout,e.instance),e.layout.lastDirectCall=i,e.layout.delayed=!1},o)})(t)}}}}},_DocumentRoles.prototype._layout_descs=function(){for(var e in enhancedElements){var t=enhancedElements[e];if(t.enhanced&&this.handlers.layout[t.role]){var n=!1,r=t.el.offsetWidth,i=t.el.offsetHeight,s=t.el.scrollWidth,o=t.el.scrollHeight;r==0&&i==0&&(t.layout.displayed&&(n=!0),t.layout.displayed=!1);if(t.layout.width!=r||t.layout.height!=i)t.layout.width=r,t.layout.height=i,n=!0;if(t.layout.contentWidth!=s||t.layout.contentHeight!=o)t.layout.contentWidth=s,t.layout.contentHeight=o,n=!0;t.layout.area!=getActiveArea()&&(t.layout.area=getActiveArea(),n=!0),n&&this.handlers.layout[t.role].call(this,t.el,t.layout,t.instance)}}},_DocumentRoles.prototype._area_changed_descs=function(){for(var e in enhancedElements){var t=enhancedElements[e];t.enhanced&&this.handlers.layout[t.role]&&(t.layout.area=getActiveArea(),this.handlers.layout[t.role].call(this,t.el,t.layout,t.instance))}},_DocumentRoles.prototype.on=function(e,t,n){arguments.length==2&&(n=t),this._on_event.push({type:e,func:n,name:e,role:t})},DocumentRoles.presets.declare("handlers.enhance",{}),DocumentRoles.presets.declare("handlers.layout",{}),DocumentRoles.presets.declare("handlers.discard",{}),_DocumentRoles.default_enhance=function(e,t,n){return{}},_DocumentRoles.default_layout=function(e,t,n){},_DocumentRoles.default_discard=function(e,t,n){},DocumentRoles.useBuiltins=function(e){DocumentRoles.restrict({singleton:!0,lifecycle:"page"});for(var t=0,n;n=e[t];++t)this["enhance_"+n]&&this.presets.declare(["handlers","enhance",n],this["enhance_"+n]),this["layout_"+n]&&this.presets.declare(["handlers","layout",n],this["layout_"+n]),this["discard_"+n]&&this.presets.declare(["handlers","discard",n],this["discard_"+n])};var _scrollbarSize;essential.declare("scrollbarSize",scrollbarSize);var StageLayouter=essential.declare("StageLayouter",Generator(_StageLayouter,Layouter));Layouter.variant("area-stage",StageLayouter),_StageLayouter.prototype.getIntroductionArea=function(){return this.introductionArea},_StageLayouter.prototype.getAuthenticatedArea=function(){return this.authenticatedArea},_StageLayouter.prototype.refreshClass=function(e){var t=[];for(var n=0,r;r=this.areaNames[n];++n)r==this.activeArea?t.push(r+"-area-active"):t.push(r+"-area-inactive");var i=this.baseClass+t.join(" ");e.className!=i&&(e.className=i)},_StageLayouter.prototype.updateActiveArea=function(e){this.activeArea=e,this.refreshClass(document.getElementById(this.key))};var MemberLaidout=essential.declare("MemberLaidout",Generator(_MemberLaidout,Laidout));Laidout.variant("area-member",MemberLaidout)}(),!function(){"use strict";function b(e){var t=this;return setTimeout(function(){t.submit(e)},0),!1}function w(e){document.activeElement&&document.activeElement.blur(),this.blur(),E.call(this,e)}function E(e){e==undefined&&(e=r().withDefaultSubmit(this)),e.commandElement&&v(e)}function S(e){return E.call(this,e)}function x(){for(var e=0,t;t=this.elements[e];++e)t.blur()}function T(){for(var e=0,t;t=this.elements[e];++e){var n=t.getAttribute("autofocus");if(!n)continue;t.focus();break}}function N(e){e=r(e).withActionInfo();if(e.commandElement){if(e.stateful&&e.stateful("state.disabled"))return;if(e.ariaDisabled)return;this.submit(e),e.stopPropagation()}if(e.defaultPrevented)return!1}function C(e){for(var t=0,n;n=e[t];++t)switch(n.tagName){case"button":case"BUTTON":n.setAttribute("role","button");break;case"a":case"A":n.setAttribute("role","link")}}function k(e){for(var t=0,n;n=e[t];++t)n.type==="submit"&&(n.setAttribute("type","button"),n.type==="submit"&&(n.type="submit"))}function L(e,t){var n=Resolver(t||"default")(e,"null");return n?Generator(n):null}function A(e,t,n){n=n||"parentNode";while(e){if(e.getAttribute&&e.getAttribute("role")==t)return e;e=e[n]}return null}function P(){}function H(e){if(D!=null)return;e.preventDefault&&e.preventDefault();var t=this.parentNode.scrolled,n=new P;return n.track=function(e,n,r){t.scrollTop=r},n.start(this,e),n.startY=t.scrollTop,n.startX=t.scrollLeft,n.factorY=t.scrollHeight/n.el.offsetHeight,n.maxY=t.scrollHeight-t.clientHeight,!1}function B(e){if(D!=null)return;e.preventDefault&&e.preventDefault();var t=this.parentNode.scrolled,n=new P;return n.track=function(e,n,r){t.scrollLeft=n},n.start(this,e),n.startY=t.scrollTop,n.startX=t.scrollLeft,n.factorX=t.scrollWidth/n.el.offsetWidth,n.maxX=t.scrollWidth-t.clientWidth,!1}function j(e,t,n,r){this.scrolled=e,this.el=o("div",{"class":n["class"]},"<header></header><footer></footer><nav><header></header><footer></footer></nav>"),t.appendChild(this.el),this.sizeName=n.sizeName,this.posName=n.posName,this.sizeStyle=n.sizeName.toLowerCase(),this.posStyle=n.posName.toLowerCase(),this.autoHide=n.autoHide,this.trackScrolled(e),h(e,_),h(this.el,{mousedown:r}),n.initialDisplay!==!1&&this.show()&&(this.hiding=setTimeout(this.hide.bind(this),parseInt(n.initialDisplay,10)||3e3))}function F(e,t){var n=e.parentNode;t.obscured&&(e.parentNode.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;overflow:hidden;",e.style.right="-"+m()+"px",e.style.bottom="-"+m()+"px",e.style.paddingRight=m()+"px",e.style.paddingBottom=m()+"px",n=n.parentNode),this.x=!1!==t.x,this.y=!1!==t.y,this.vert=new j(e,n,{"class":t.obscured?"vert-scroller obscured":"vert-scroller",initialDisplay:t.initialDisplay,sizeName:"Height",posName:"Top"},H),this.vert.el.style.width=m()+"px",t.obscured&&(this.vert.el.style.right="-"+m()+"px"),this.horz=new j(e,n,{"class":t.obscured?"horz-scroller obscured":"horz-scroller",initialDisplay:t.initialDisplay,sizeName:"Width",posName:"Left"},B),this.horz.el.style.height=m()+"px",t.obscured&&(this.horz.el.style.bottom="-"+m()+"px"),n.scrolled=e,i(n,!0),h(n,M),n.scrollContainer="top",this.refresh(e)}var e=Resolver("essential",{}),t=e("ObjectType"),n=e("console"),r=e("MutableEvent"),i=e("StatefulResolver"),s=e("statefulCleaner"),o=e("HTMLElement"),u=e("HTMLScriptElement"),a=e("Layouter"),f=e("Laidout"),l=e("EnhancedDescriptor"),c=e("callCleaners"),h=e("addEventListeners"),p=e("removeEventListeners"),d=e("DocumentRoles"),v=e("fireAction"),m=e("scrollbarSize"),g=location.href.substring(0,location.href.split("?")[0].lastIndexOf("/")+1),y=location.protocol+"//"+location.host;d.enhance_dialog=function(e,t,n){switch(e.tagName.toLowerCase()){case"form":e.onsubmit=b,e.__builtinSubmit=e.submit,e.submit=w,e.__builtinBlur=e.blur,e.blur=x,e.__builtinFocus=e.focus,e.focus=T;break;default:k(e.getElementsByTagName("BUTTON")),C(e.getElementsByTagName("BUTTON")),C(e.getElementsByTagName("A")),e.submit=E}return h(e,{click:N},!1),{}},d.layout_dialog=function(e,t,n){},d.discard_dialog=function(e,t,n){},d.enhance_toolbar=function(e,t,n){return k(e.getElementsByTagName("BUTTON")),C(e.getElementsByTagName("BUTTON")),C(e.getElementsByTagName("A")),e.submit=S,h(e,{click:N},!1),{}},d.layout_toolbar=function(e,t,n){},d.discard_toolbar=function(e,t,n){},d.enhance_navigation=d.enhance_menu=d.enhance_menubar=d.enhance_toolbar,d.enhance_sheet=function(e,t,n){return{}},d.layout_sheet=function(e,t,n){},d.discard_sheet=function(e,t,n){},d.enhance_spinner=function(e,t,n){var r={lines:8,length:5,width:5,radius:8,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:n.zIndex!=undefined?n.zIndex:2e9,top:"auto",left:"auto"};return(new Spinner(r)).spin(e)},d.layout_spinner=function(e,t,n){},d.discard_spinner=function(e,t,n){n.stop(),e.innerHTML=""},d.enhance_application=function(e,t,n){n.variant;if(n.generator){var r=L(n.generator,n.resolver);if(r){var i=r(e,t,n);return i}return!1}return{}},d.layout_application=function(e,t,n){},d.discard_application=function(e,t,n){};var O=0,M={mousemove:function(e){},mouseover:function(e){var t=l(this.scrolled).instance;this.stateful.movedOutInterval&&clearTimeout(this.stateful.movedOutInterval),this.stateful.movedOutInterval=null,this.stateful.set("over",!0),t.vert.show(),t.horz.show()},mouseout:function(e){var t=this,n=l(this.scrolled).instance;this.stateful.movedOutInterval&&clearTimeout(this.stateful.movedOutInterval),this.stateful.movedOutInterval=setTimeout(function(){t.stateful.set("over",!1),t.stateful("dragging")!=1&&(n.vert.hide(),n.horz.hide())},30)}},_={scroll:function(e){var t=l(this).instance;t.vert.shown||(t.vert.show(),t.horz.show(),!this.stateful("over")&&!this.stateful("dragging")&&(t.vert.delayedHide(),t.horz.delayedHide())),t.refresh(this)},mousewheel:function(e){var t=e.delta,n=e.x,r=e.y;e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),r=t,e.axis!=undefined&&e.axis==e.HORIZONTAL_AXIS&&(r=0,n=-1*t),e.wheelDeltaY!==undefined&&(r=e.wheelDeltaY/120),e.wheelDeltaX!==undefined&&(n=-1*e.wheelDeltaX/120);if(n<0&&0==this.scrollLeft||n>0&&this.scrollLeft+Math.ceil(this.offsetWidth)==this.scrollWidth)return e.preventDefault&&e.preventDefault(),!1}},D=null;P.prototype.track=function(e){},P.prototype.start=function(e,t){var r=this;return this.el=e,this.event=t,this.startY=e.offsetTop,this.minY=0,this.maxY=1e3,this.startX=e.offsetLeft,this.minX=0,this.maxX=1e3,this.factorX=1,this.factorY=1,this.startPageY=t.pageY,this.startPageX=t.pageX,document.onselectstart=function(e){return!1},e.stateful&&e.stateful.set("dragging",!0),this.drag_events={keyup:function(e){},mousemove:function(e){var t=1e3,i=1e3,s=Math.min(Math.max(r.startY+r.factorY*(e.pageY-r.startPageY),r.minY),r.maxY),o=Math.min(Math.max(r.startX+r.factorX*(e.pageX-r.startPageX),r.minX),r.maxX);r.track(e,o,s),n.log(r.factorX,r.factorY)},mouseup:function(e){r.end()}},h(document.body,this.drag_events),D=this,this},P.prototype.end=function(){return this.el.stateful&&this.el.stateful.set("dragging",!1),p(document.body,this.drag_events),delete document.onselectstart,D=null,this},j.prototype.trackScrolled=function(e){this.scrolledTo=e["scroll"+this.posName],this.scrolledSize=e["client"+this.sizeName],this.scrolledContentSize=e["scroll"+this.sizeName]},j.prototype.update=function(e){this.el.lastChild.style[this.posStyle]=100*this.scrolledTo/this.scrolledContentSize+"%",this.el.lastChild.style[this.sizeStyle]=100*this.scrolledSize/this.scrolledContentSize+"%"},j.prototype.show=function(){if(this.scrolledContentSize<=this.scrolledSize)return!1;if(!this.shown)return this.update(this.scrolled),this.el.className+=" shown",this.hiding&&(clearTimeout(this.hiding),delete this.hiding),this.shown=!0,!0},j.prototype.hide=function(){this.autoHide!==!1&&this.shown&&(this.el.className=this.el.className.replace(" shown",""),this.hiding&&(clearTimeout(this.hiding),delete this.hiding),this.shown=!1)},j.prototype.delayedHide=function(e){var t=this;this.hiding=setTimeout(function(){t.hide()},e||1500)},j.prototype.destroy=function(){this.el.parentNode.removeChild(this.el),c(this.el),delete this.el},F.prototype.refresh=function(e){this.vert.trackScrolled(e),this.vert.update(e),this.horz.trackScrolled(e),this.horz.update(e)},F.prototype.layout=function(e,t){this.vert.shown||(this.vert.show(),this.horz.show(),!e.stateful("over")&&!e.stateful("dragging")&&(this.vert.delayedHide(750),this.horz.delayedHide(750))),this.refresh(e)},F.prototype.discard=function(e){this.vert&&this.vert.destroy(),this.horz&&this.horz.destroy(),delete this.vert,delete this.horz,c(e.parentNode),c(e)},d.enhance_scrolled=function(e,t,n){i(e,!0),e.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;overflow:scroll;";var r=new F(e,n);return r},d.layout_scrolled=function(e,t,n){n.layout(e,t)},d.discard_scrolled=function(e,t,n){n.discard(e),e.stateful&&e.stateful.destroy()}}()
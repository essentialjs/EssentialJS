/*!
    Essential JavaScript ‚ùÄ http://essentialjs.com
    Copyright (C) 2011 by Henrik Vendelbo

    Licensed under GNU Affero v3 and MIT. See http://essentialjs.com/license/
*/function Resolver(a,b,c){function e(a,c){var e=b;for(var f=0,g;g=a[f];++f){var h=e;e=e[g];if(e==undefined)switch(c){case undefined:case"generate":e=h[g]=d();break;case"null":return null;case"throw":throw new Error("The '"+g+"' part of '"+a.join(".")+"' couldn't be resolved.")}}return e}function f(a,b,c,d){c[d]=a,a.__generator__==a&&(a.info.symbol=d,a.info["package"]=b.join("."),a.info.within=c)}function g(a,b){return typeof a=="object"?e(a.name.split("."),a.onundefined):e(a.split("."),b)}switch(typeof a){case"undefined":return Resolver.default;case"string":return Resolver[a]==undefined&&(c==undefined&&(c=b,b={}),Resolver[a]=Resolver(b,c),Resolver[a].named=a),Resolver[a]}c=b||{},b=a,a=c.name;var d=c.generator||Generator(Object);return g.named=a,g.namespace=b,g.declare=function(a,b,c){var d=a.split("."),g=d.pop(),h=e(d,c);h[g]===undefined&&f(b,d,h,g)},g.set=function(a,b,c){var d=a.split("."),g=d.pop(),h=e(d,c);f(b,d,h,g)},g.reference=function(a,b){function d(){var a=e(c,b);return a}function g(a){var d=c.pop(),g=e(c,b);c.push(d),f(a,c,g,d)}function h(a){var d=c.pop(),g=e(c,b);c.push(d),g[d]===undefined&&f(a,c,g,d)}var c=a.split(".");return d.set=g,d.get=d,d.declare=h,d},g.override=function(a,b){b=b||{};var c=b.name||this.named;return Resolver[c]=Resolver(a,b),Resolver[c].named=c,Resolver[c]},g}function Generator(a,b){function d(a,b,d,e,f,h,i,j,k,l,m,n){var o;if(g.info.existing){var p=g.info.identifier.apply(g.info,arguments);p in g.info.existing||(o=g.info.existing[p]=o=new g.type),o=g.info.existing[p]}else o=new g.type;o.__context__={generator:g,info:c,args:[a,b,d,e,f,h,i,j,k,l,m,n]};for(var k=0,i;i=c.constructors[k];++k)c.constructors[k].apply(o,o.__context__.args);return delete o.__context__,o}function e(b,c,d,e,f,h,i,j,k,l,m,n){var o=a.apply(g,arguments);return o}function f(){var a=this.__context__.generator.args;for(var b=0,c;c=a[b];++b)c.preset&&(this[c.preset]=arguments[b])}function h(a){for(var b in a)this.prototype[b]=a[b]}function i(a,b,c,d,e,f){if(b==undefined){var g=this.variants[a];if(g.generator)return g.generator;var g=this.variants[""];return g.generator?g.generator:this}var h=b.handlers,i=b.bases;this.variants[a]={func:b,generator:Generator(b),handlers:h||{},bases:i||[],additional:[c,d,e,f]}}function j(){var a=[];a.push("function "),a.push(this.info.package),a.push("."),a.push(this.info.symbol),a.push("(");var b=[];for(var c=0,d;d=this.args[c];++c)b.push(d.name+":"+d.variantName);return a.push(b.join(",")),a.push(")"),a.push(" {"),a.push("<br>  "),a.push("<br>  }"),a.push("<br>  "),a.join("")}function k(a){if(a.singleton)this.info.singleton=!0,this.info.lifecycle=a.lifecycle,this.info.existing={},this.info.identifier=function(){return 0},this.info.restricted||(Generator.restricted.push(g),this.info.restricted=!0);else if(a.identifier){var b=typeof a.identifier=="string"?a.identifier:"identifier";this.info.identifier=this.info.constructors[-1][b],this.info.existing={},this.info.restricted||(Generator.restricted.push(g),this.info.restricted=!0)}else a.size!=undefined&&(this.info.restricted||(Generator.restricted.push(g),this.info.restricted=!0))}if(a.__generator__)return a.__generator__;var c={arguments:{},options:b,constructors:[]},g=function(b){function u(){}var g=b.length-1,h=b[g];typeof h=="function"?h={}:--g,c.options=h;var i=h.alloc===!1?e:d;i.__generator__=i,i.info=c,i.args=h.args||a.args||[];var j=!1;for(var k=0,l;l=i.args[k];++k)l.no=k,c.arguments[l.name]=l,l.preset&&(j=!0);j&&c.constructors.push(f);var m=i.bases=a.bases||[];if(g>0){m=i.bases=[];for(var k=g,l;k>=1&&(l=b[k]);--k)m.push(b[k])}var n=c.constructors;for(var k=0,o;o=m[k];++k){if(o.bases)for(var p=0,q;q=o.bases[p];++p)n.push(o.bases[p]);n.push(o)}n.push(a),n[-1]=a;if(m.length){var r=Generator(m[0]),s=i.prototype=new r.type;for(var k=1,o;o=m[k];++k)for(var t in o.prototype)s[t]=o.prototype[t]}i.type=u,i.type.prototype=i.prototype;for(var t in a.prototype)i.prototype[t]=a.prototype[t];return a.prototype=i.prototype,i}(arguments);return g.mixin=h,g.variant=i,g.variants={},g.toRepr=j,g.restrict=k,a.__generator__=g,g}Resolver.default=Resolver({},{name:"default"}),Resolver.hasGenerator=function(a){return a.__generator__?!0:typeof a=="function"&&typeof a.type=="function"?!0:!1},Generator.restricted=[],function(a){function c(a){this.options=a||{},this.name=this.options.name,this.preset=this.options.preset===!0?this.name:this.options.preset}function d(a){this.type=String,this.variantName="String"}function e(a){this.type=Number,this.variantName="Number"}function f(a){this.type=Date,this.variantName="Date"}function g(a){this.type=Boolean,this.variantName="Boolean"}function h(a){this.type=Object,this.variantName="Object"}function i(a){this.type=Array,this.variantName="Array"}function j(){for(var a=0,b;b=Generator.restricted[a];++a)b.info.lifecycle=="page"&&b()}function k(){for(var a=0,b;b=Generator.restricted[a];++a){var c=b.info.constructors[-1].discarded;for(var d in b.info.existing){var e=b.info.existing[d];c&&c.call(b,e)}b.info.constructors[-1].__generator__=undefined,b.__generator__=undefined}}function l(){j()}function m(){}function n(){k()}function o(){if(a.document.addEventListener){var b=function(){a.document.removeEventListener("DOMContentLoaded",b,!1),l()};a.document.addEventListener("DOMContentLoaded",b,!1),a.addEventListener("load",l,!1)}else if(a.document.attachEvent){var c=function(){a.document.readyState==="complete"&&(a.document.detachEvent("onreadystatechange",c),l())};a.document.attachEvent("onreadystatechange",c),a.attachEvent("onload",l);var d=!1;try{d=a.frameElement==null}catch(e){}if(a.document.documentElement.doScroll&&d){var f=function(){if(readyList.length==0)return;try{a.document.documentElement.doScroll("left")}catch(b){setTimeout(f,1);return}l()};f()}}}var b=Resolver("essential",{});b.set("Type",Generator(c)),b.set("StringType",Generator(d,c)),b.namespace.Type.variant("String",b.namespace.StringType),b.set("NumberType",Generator(e,c)),b.namespace.Type.variant("Number",b.namespace.NumberType),b.set("DateType",Generator(f,c)),b.namespace.Type.variant("Date",b.namespace.DateType),b.set("BooleanType",Generator(g,c)),b.namespace.Type.variant("Boolean",b.namespace.BooleanType),b.set("ObjectType",Generator(h,c)),b.namespace.Type.variant("Object",b.namespace.ObjectType),b.set("ArrayType",Generator(i,c)),b.namespace.Type.variant("Array",b.namespace.ArrayType),window.device||(o(),a.addEventListener?a.addEventListener("load",m,!1):a.attachEvent("onload",m),a.addEventListener?a.addEventListener("beforeunload",n,!1):a.attachEvent("onbeforeunload",n))}(window);